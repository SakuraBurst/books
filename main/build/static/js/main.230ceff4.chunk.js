(this.webpackJsonpbooks_front=this.webpackJsonpbooks_front||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return at}));var r,a=n(0),c=n.n(a),o=n(27),i=n.n(o),u=(n(129),n(130),n(13)),s=n(263),d=n(50),l=function(){return Object(d.b)()},b=d.c;!function(e){e.FIRST_APP_LOADING="FIRST_APP_LOADING",e.SET_LOADING="SET_LOADING",e.SET_ALERT="SET_ALERT",e.REMOVE_ALERT="REMOVE_ALERT",e.REMOVE_ALERT_TIMEOUT="REMOVE_ALERT_TIMEOUT",e.LOGIN="LOGIN",e.LOGOUT="LOGOUT",e.REGISTRATION="REGISTRATION",e.GET_USER_BY_TOKEN="GET_USER_BY_TOKEN",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.SET_TOKEN="SET_TOKEN",e.GET_BOOKS="GET_BOOKS",e.SET_BOOKS="SET_BOOKS",e.GET_BOOK="GET_BOOK",e.SET_BOOK="SET_BOOK",e.ADD_BOOK="ADD_BOOK",e.EDIT_BOOK="EDIT_BOOK",e.DELETE_BOOK="DELETE_BOOK"}(r||(r={}));var j=function(e){return{type:r.LOGIN_SUCCESS,data:e}},O=function(){return{type:r.LOGOUT}},p=n(11),f=n.n(p),m=n(6),h=n(117),x=n.n(h).a.create({baseURL:"http://localhost:3584",timeout:15e3}),v=function(e){return{type:r.FIRST_APP_LOADING,flag:e}},g=function(e){return{type:r.SET_LOADING,flag:e}},_=function(e){var t={type:e.type,text:e.text,id:(new Date).getTime()};return at.dispatch(E(t.id,5e3)),{type:r.SET_ALERT,newAlert:t}},E=function(e,t){return{type:r.REMOVE_ALERT_TIMEOUT,alertId:e,timeout:t}},y=function(e){return{type:r.REMOVE_ALERT,alertId:e}},k=f.a.mark(T);function T(e,t){var n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(401!==(null===(n=e.response)||void 0===n?void 0:n.status)){r.next=8;break}return localStorage.setItem(A,""),r.next=4,Object(m.d)(O());case 4:return r.next=6,Object(m.d)(_({type:"error",text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}));case 6:r.next=10;break;case 8:return r.next=10,Object(m.d)(_({type:"error",text:t}));case 10:return r.next=12,Object(m.d)(g(!1));case 12:case"end":return r.stop()}}),k)}var S=f.a.mark(G),w=f.a.mark(C),N=f.a.mark(D),I=f.a.mark(K),R=function(e){return function(){return x.post("/api/login",e)}},B=function(e){return function(){return x.post("/api/registration",e)}},L=function(){return x.get("/api/v2/user")},A="auth_key";function G(e){var t,n,r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.loginObj,n=e.history,a.next=3,Object(m.d)(g(!0));case 3:return a.prev=3,a.next=6,Object(m.b)(R(t));case 6:return r=a.sent,localStorage.setItem(A,r.data.token),x.defaults.headers.Authorization=r.data.token,a.next=11,Object(m.d)(j(r.data));case 11:return n.push("/books"),a.next=14,Object(m.d)(g(!1));case 14:a.next=21;break;case 16:return a.prev=16,a.t0=a.catch(3),console.log(a.t0),a.next=21,T(a.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0438\u043c\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445");case 21:case"end":return a.stop()}}),S,null,[[3,16]])}function C(e){var t,n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.newUser,n=e.history,r.next=3,Object(m.d)(g(!0));case 3:return r.prev=3,r.next=6,Object(m.b)(B(t));case 6:return n.push("/authorization"),r.next=9,Object(m.d)(_({type:"success",text:"\u0442\u044b \u0437\u0430\u0440\u0435\u0433\u0430\u043b\u0441\u044f, \u0437\u0430\u0435\u0431\u0438\u0441\u044c, \u0442\u0435\u043f\u0435\u0440\u044c \u0442\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u0441 \u044d\u0442\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0437\u0430\u0439\u0442\u0438"}));case 9:return r.next=11,Object(m.d)(g(!1));case 11:r.next=18;break;case 13:return r.prev=13,r.t0=r.catch(3),console.log(r.t0),r.next=18,T(r.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0438\u043c\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445");case 18:case"end":return r.stop()}}),w,null,[[3,13]])}function D(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.b)(L);case 3:return e=t.sent,t.next=6,Object(m.d)(j(e.data));case 6:return t.next=8,Object(m.d)(v(!1));case 8:t.next=17;break;case 10:return t.prev=10,t.t0=t.catch(0),console.log(t.t0.response),t.next=15,T(t.t0,"\u0422\u043e\u043a\u0435\u043d \u0443\u0441\u0442\u0430\u0440\u0435\u043b");case 15:return t.next=17,Object(m.d)(v(!1));case 17:case"end":return t.stop()}}),N,null,[[0,10]])}function K(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.e)(r.GET_USER_BY_TOKEN,D);case 2:return e.next=4,Object(m.e)(r.REGISTRATION,C);case 4:return e.next=6,Object(m.e)(r.LOGIN,G);case 6:case"end":return e.stop()}}),I)}var q=n(257),M=n(1);function U(){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(q.a,{animation:"border",variant:"primary"}),Object(M.jsx)(q.a,{animation:"border",variant:"secondary"}),Object(M.jsx)(q.a,{animation:"border",variant:"success"}),Object(M.jsx)(q.a,{animation:"border",variant:"danger"}),Object(M.jsx)(q.a,{animation:"border",variant:"warning"}),Object(M.jsx)(q.a,{animation:"border",variant:"info"}),Object(M.jsx)(q.a,{animation:"border",variant:"light"}),Object(M.jsx)(q.a,{animation:"border",variant:"dark"}),Object(M.jsx)(q.a,{animation:"grow",variant:"primary"}),Object(M.jsx)(q.a,{animation:"grow",variant:"secondary"}),Object(M.jsx)(q.a,{animation:"grow",variant:"success"}),Object(M.jsx)(q.a,{animation:"grow",variant:"danger"}),Object(M.jsx)(q.a,{animation:"grow",variant:"warning"}),Object(M.jsx)(q.a,{animation:"grow",variant:"info"}),Object(M.jsx)(q.a,{animation:"grow",variant:"light"}),Object(M.jsx)(q.a,{animation:"grow",variant:"dark"})]})}var V=Object(a.createContext)(void 0),Y=function(){return Object(a.useContext)(V)},F=function(e){var t=e.children,n=Object(a.useRef)(l());n.current=l();var c=b((function(e){return e.auth})),o=c.user,i=c.token,u=b((function(e){return e.common.firstAppLoading})),s={currentToken:i,user:o,login:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){n.current(function(e,t){return{type:r.LOGIN,loginObj:e,history:t}}(e,t))})),logOut:function(){n.current(O())},registration:function(e,t){n.current(function(e,t){return{type:r.REGISTRATION,newUser:e,history:t}}(e,t))}};return Object(a.useEffect)((function(){var e=localStorage.getItem(A);e?(x.defaults.headers.Authorization=e,n.current({type:r.GET_USER_BY_TOKEN})):n.current(v(!1))}),[]),s&&!u?Object(M.jsx)(V.Provider,{value:s,children:t}):Object(M.jsx)(U,{})},z=n(16),H=n(123),P=n(262),X=n(258),Z=function(e){var t=e.formikInitialValue,n=e.fields,r=e.buttonName,a=e.onSubmit,c=e.schema,o=Object(H.a)({initialValues:t,validationSchema:c,onSubmit:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a(e)}))});return Object(M.jsx)("div",{className:"auth-form justify-content-center d-flex",children:Object(M.jsxs)(P.a,{noValidate:!0,validated:o.isValid,onSubmit:o.handleSubmit,children:[n.map((function(e){return Object(M.jsx)(P.a.Row,{children:Object(M.jsxs)(P.a.Group,{children:[Object(M.jsx)(P.a.Label,{children:e.title}),Object(M.jsx)(P.a.Control,{required:!0,id:e.valueName,name:e.valueName,type:e.type,onBlur:o.handleBlur,placeholder:e.placeholder,value:o.values[e.valueName],onChange:o.handleChange,isValid:o.touched[e.valueName]&&!o.errors[e.valueName],isInvalid:o.touched[e.valueName]&&!!o.errors[e.valueName]})]})},e.controlId)})),Object(M.jsx)(X.a,{type:"submit",children:r})]})})},J=function(e){var t=l(),n=Y(),r=z.b({email:z.c().email("Invalid email address").required("Required"),password:z.c().required("Required")});return Object(M.jsxs)("div",{className:"auth-form justify-content-center d-flex",children:[Object(M.jsx)(Z,{formikInitialValue:{email:"",password:""},fields:[{type:"text",valueName:"email",title:"E-mail",placeholder:"",controlId:"3"},{type:"password",valueName:"password",title:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"",controlId:"4"}],buttonName:"\u0412\u043e\u0439\u0442\u0438",onSubmit:function(r){n?n.login(r,e.history):t(_({type:"error",text:"\u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0438 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b"}))},schema:r}),Object(M.jsx)(s.a,{onClick:function(){e.history.push("/registration")},className:"cursor-pointer",variant:"primary",children:"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},Q=n(23),W=function(){return{type:r.GET_BOOKS}},$=function(e){return{type:r.SET_BOOKS,data:e}},ee=function(e){return{type:r.SET_BOOK,data:e}},te=n(265),ne=n(259),re=n(260),ae=n(67),ce=n.n(ae),oe=n(261),ie=function(e){var t=e.children,n=e.show,r=e.onHide,a=e.submitButton,c=e.submitButtonText,o=e.onSubmit,i=e.text,u=e.showFooter,s=void 0===u||u;return Object(M.jsxs)(oe.a,{show:n,onHide:r,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(M.jsx)(oe.a.Header,{closeButton:!0,children:Object(M.jsx)(oe.a.Title,{id:"contained-modal-title-vcenter",children:i})}),Object(M.jsx)(oe.a.Body,{children:t}),s?Object(M.jsxs)(oe.a.Footer,{children:[a?Object(M.jsx)(X.a,{onClick:o,children:c}):Object(M.jsx)(M.Fragment,{}),Object(M.jsx)(X.a,{onClick:r,children:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c"})]}):Object(M.jsx)(M.Fragment,{})]})},ue=function(e){var t=e.show,n=e.onHide,a=(e.history,l()),c=z.b({title:z.c().required("Required"),author:z.c().required("Required"),year:z.a().required("Required")});return Object(M.jsx)(ie,{show:t,onHide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return n()})),onSubmit:function(){},submitButton:!1,submitButtonText:"",text:"\u0414\u043e\u0431\u0430\u0432\u044c \u043a\u043d\u0438\u0433\u0443",showFooter:!1,children:Object(M.jsx)(Z,{formikInitialValue:{title:"",author:"",year:""},fields:[{type:"text",valueName:"title",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"",controlId:"1"},{type:"text",valueName:"author",title:"\u0410\u0432\u0442\u043e\u0440",placeholder:"",controlId:"2"},{type:"date",valueName:"year",title:"\u0413\u043e\u0434",placeholder:"",controlId:"3"}],buttonName:"\u043d\u043e\u0432\u0430\u044f \u043a\u043d\u0438\u0433\u0430",onSubmit:function(e){var t;a((t=e,{type:r.ADD_BOOK,book:t})),n()},schema:c})})},se=function(e){var t=Object(a.useState)([]),n=Object(Q.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),i=Object(Q.a)(o,2),u=i[0],s=i[1],d=b((function(e){return e.books.books})),j=l(),O=Object(a.useRef)((function(){}));O.current=function(){j(W())},Object(a.useEffect)((function(){O.current()}),[]),Object(a.useEffect)((function(){d.length>0&&p.current(5)()}),[d]);var p=Object(a.useRef)((function(e){return function(){console.log(e)}}));return p.current=function(e){return function(){for(var t=[],n=e-5;n<e;n++)d[n]&&t.push(d[n]);c(t)}},Object(M.jsxs)("div",{children:[r.map((function(t){return Object(M.jsx)(te.a,{onClick:function(){return e.history.push("/books/".concat(t.id))},className:"book-card cursor-pointer my-2",children:Object(M.jsxs)(te.a.Body,{children:[Object(M.jsx)(te.a.Title,{children:t.title}),Object(M.jsx)(te.a.Subtitle,{className:"mb-2 text-muted",children:t.author}),Object(M.jsx)(te.a.Text,{children:Object(M.jsx)(ce.a,{format:"DD.MM.YYYY",children:t.year})})]})},t.id)})),Object(M.jsx)(ne.a,{children:Object(M.jsx)(re.a,{children:function(){for(var e=[],t=Math.ceil(d.length/5),n=1;n<=t;n++)e.push(Object(M.jsx)(X.a,{onClick:p.current(5*n),children:n},"".concat(new Date,"_").concat(n)));return e}()})}),Object(M.jsx)(X.a,{onClick:function(){return s(!0)},className:"mt-5",variant:"success",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"}),Object(M.jsx)(ue,{show:u,onHide:function(){return s(!1)},history:e.history})]})};function de(e){var t=e.children,n=e.path,r=Y();return r&&r.currentToken?Object(M.jsx)(u.b,{path:n,children:t}):Object(M.jsx)(u.a,{to:"/authorization"})}var le=function(e){var t=Y(),n=l(),r=z.b({first_name:z.c().required("Required"),last_name:z.c().required("Required"),email:z.c().email("Invalid email address").required("Required"),password:z.c().required("Required")});return Object(M.jsx)("div",{className:"auth-form justify-content-center d-flex",children:Object(M.jsx)(Z,{formikInitialValue:{first_name:"",last_name:"",email:"",password:""},fields:[{type:"text",valueName:"first_name",title:"\u0418\u043c\u044f",placeholder:"",controlId:"1"},{type:"text",valueName:"last_name",title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",placeholder:"",controlId:"2"},{type:"text",valueName:"email",title:"E-mail",placeholder:"",controlId:"3"},{type:"password",valueName:"password",title:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"",controlId:"4"}],buttonName:"\u0437\u0430\u0440\u0435\u0433\u0430\u0442\u044c\u0441\u044f",onSubmit:function(r){t?t.registration(r,e.history):n(_({type:"error",text:"\u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0438 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b"}))},schema:r})})},be=function(e){var t=e.id,n=e.onHide,a=e.show,c=e.history,o=l();function i(){o(function(e,t){return{type:r.DELETE_BOOK,id:e,history:t}}(t,c))}return Object(M.jsx)(ie,{show:a,submitButton:!0,onSubmit:function(){return i()},submitButtonText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onHide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return n()})),text:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",children:Object(M.jsx)("div",{children:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e"})})},je=n(82),Oe=n.n(je),pe=function(e){var t=e.show,n=e.onHide,a=e.book,c=l(),o={title:a.title,author:a.author,year:Oe()(a.year).format("YYYY-MM-DD")},i=z.b({title:z.c().required("Required"),author:z.c().required("Required"),year:z.a().required("Required")});return Object(M.jsx)(ie,{show:t,onHide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return n()})),onSubmit:function(){},submitButton:!1,submitButtonText:"",text:"\u0418\u0437\u043c\u0435\u043d\u0438 \u043a\u043d\u0438\u0433\u0443",showFooter:!1,children:Object(M.jsx)(Z,{formikInitialValue:o,fields:[{type:"text",valueName:"title",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"",controlId:"1"},{type:"text",valueName:"author",title:"\u0410\u0432\u0442\u043e\u0440",placeholder:"",controlId:"2"},{type:"date",valueName:"year",title:"\u0413\u043e\u0434",placeholder:"",controlId:"3"}],buttonName:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c",onSubmit:function(e){var t,o;c((t=e,o="".concat(a.id),{type:r.EDIT_BOOK,bookForm:t,id:o})),n()},schema:i})})},fe=function(e){var t=["https://tlgrm.eu/_/stickers/b12/d5f/b12d5fb5-fbd0-3a2d-99fc-2642b586f219/2.jpg","https://static.wikia.nocookie.net/36689b26-ddcb-4ae6-a8c0-33b165fb6bcd","https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/1209ea8d93d/b040e8b2b7aeb701e436e/1472075717_1397934971_image.jpg","https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/707e18cc5da/8719cc8272f4a5b57aa64/1472097606_image.jpg","https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/9c601aca149/f9efb55a108f9c805cf97/1417725120_image.jpg","https://i.ytimg.com/vi/hCpnNCqjULw/maxresdefault.jpg","https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/90dc2512709/05953e2add74dbac18317/1415193181_image.jpg","http://i.mycdn.me/i?r=AEHujHvw2RjEbemUCNEorZbxYpb_p_9AcN2FmGik64KrkRZtvDpGZlB7IRDnkDh2-EF7Zi9s0CiBOSDmbngC-I-k&fn=external_8","https://user92966.clients-cdnnow.ru/upload/setka-editor/a1c/a1cd53320de0951efc82d79db29afc44.jpg.webp","https://user92966.clients-cdnnow.ru/upload/setka-editor/0fe/0fe5f8ef5cc10ec303873a01d39ec01d.jpg.webp","https://sun9-69.userapi.com/impg/ae9mYIT5fRNtgCKP9m5d8wz6ZgqVkDt5JV1u2A/2jRtGN37Ht8.jpg?size=1920x1080&quality=96&sign=211aaf2a866dde1148f548273cbbe14b&type=album","https://sun9-53.userapi.com/impg/6d_zXlOn97SGWJdbrh9zb5ktYlyOUPQIVbmGTA/OM3iO6poYyQ.jpg?size=1925x863&quality=96&sign=28d45dd729e6e8ab6de0977379f2c039&type=album","https://sun9-19.userapi.com/impg/jmdNejMU9wxKV13PfjAhXjWIS5mLs6cXJ1YRlA/K-XxkGAuzbo.jpg?size=1920x1080&quality=96&sign=fd224e2ad334871c1ad6afb999fb9ab6&type=album","https://sun9-20.userapi.com/impg/SmBVN_ZAYSjpU6xM5VV1gYFRN-dFzBOk0jUTiQ/IH80pVkkFgc.jpg?size=1920x1080&quality=96&sign=4ec042afb016c1e7e493eda5a1c303f3&type=album"],n=Object(a.useState)(!1),c=Object(Q.a)(n,2),o=c[0],i=c[1],u=Object(a.useState)(!1),s=Object(Q.a)(u,2),d=s[0],j=s[1],O=Object(a.useState)(0),p=Object(Q.a)(O,2),f=p[0],m=p[1],h=b((function(e){return e.books.currentBook})),x=e.match.params.id,v=Object(a.useRef)((function(){return m(Math.round(Math.random()*t.length-1))})),g=l();return Object(a.useEffect)((function(){v.current(),g(function(e){return{type:r.GET_BOOK,id:e}}(x))}),[g,x]),h?Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{className:"d-flex mt-5 justify-content-end",children:Object(M.jsx)(X.a,{onClick:function(){return i(!0)},variant:"danger",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"})}),Object(M.jsx)(be,{id:x,onHide:function(){return i(!1)},show:o,history:e.history}),Object(M.jsxs)(te.a,{className:"book-card my-2",children:[Object(M.jsx)(te.a.Img,{src:t[f]}),Object(M.jsxs)(te.a.Body,{children:[Object(M.jsx)(te.a.Title,{children:h.title}),Object(M.jsx)(te.a.Subtitle,{className:"mb-2 text-muted",children:h.author}),Object(M.jsx)(te.a.Text,{children:Object(M.jsx)(ce.a,{format:"DD.MM.YYYY",children:h.year})}),Object(M.jsx)(X.a,{onClick:function(){return j(!0)},variant:"primary",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"}),Object(M.jsx)(pe,{show:d,onHide:function(){return j(!1)},book:h})]})]})]}):Object(M.jsx)("div",{children:"\u044a\u0430\u044a\u0430"})};function me(){var e=[{routeName:"/registration",routeComponent:Object(u.g)(le),private:!1},{routeName:"/authorization",routeComponent:Object(u.g)(J),private:!1},{routeName:"/books/:id",routeComponent:Object(u.g)(fe),private:!0},{routeName:"/books",routeComponent:Object(u.g)(se),private:!0},{routeName:"/",routeComponent:Object(M.jsx)(u.a,{to:"/books"}),private:!0}];return Object(M.jsx)(u.d,{children:e.map((function(e){return e.private?Object(M.jsx)(de,{path:e.routeName,children:e.routeComponent},e.routeName):Object(M.jsx)(u.b,{path:e.routeName,children:e.routeComponent},e.routeName)}))})}var he=n(264);function xe(){var e=l(),t=b((function(e){return e.common.alerts}));return Object(M.jsx)("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",minHeight:"200px",top:0,right:0},children:t.map((function(t){return Object(M.jsxs)(he.a,{style:{backgroundColor:"success"===t.type?"green":"red",color:"white",minWidth:200},onClose:(n=t.id,function(){e(y(n))}),children:[Object(M.jsxs)(he.a.Header,{children:[Object(M.jsx)("strong",{className:"mr-auto",children:"success"===t.type?"\u0417\u0430\u0435\u0431\u0438\u0441\u044c":"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(M.jsx)("small",{children:"just now"})]}),Object(M.jsx)(he.a.Body,{children:t.text})]},t.id);var n}))})}var ve=function(){var e=b((function(e){return e.common.appLoading})),t=l(),n=Y();return Object(M.jsxs)("div",{className:"App",children:[Object(M.jsx)("div",{style:e?{}:{display:"none"},children:Object(M.jsx)(U,{})}),Object(M.jsxs)("div",{className:"app_container",style:e?{display:"none"}:{},children:[Object(M.jsx)(me,{}),Object(M.jsx)(xe,{})]}),n&&n.user&&Object(M.jsx)(X.a,{variant:"danger",size:"lg",className:"logout-button",onClick:function(){t(O())},children:"\u043b\u043e\u0433\u0430\u0443\u0442"})]})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,266)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},_e=(n(254),n(61)),Ee=n(28),ye=n(14),ke={token:"",user:void 0};function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.LOGIN_SUCCESS:return Object(ye.a)(Object(ye.a)({},e),{},{user:t.data.user,token:t.data.token});case r.SET_TOKEN:return Object(ye.a)(Object(ye.a)({},e),{},{token:t.token});case r.LOGOUT:return Object(ye.a)(Object(ye.a)({},e),{},{token:"",user:void 0});default:return e}}var Se={books:[],currentBook:null};function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_BOOKS:return Object(ye.a)(Object(ye.a)({},e),{},{books:t.data});case r.SET_BOOK:return Object(ye.a)(Object(ye.a)({},e),{},{currentBook:t.data});default:return e}}var Ne=n(21),Ie={alerts:[],appLoading:!1,firstAppLoading:!0};function Re(e,t){for(var n=[],r=0;r<e.alerts.length;r++)e.alerts[r].id!==t&&n.push(e.alerts[r]);return n}function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.FIRST_APP_LOADING:return Object(ye.a)(Object(ye.a)({},e),{},{firstAppLoading:t.flag});case r.SET_LOADING:return Object(ye.a)(Object(ye.a)({},e),{},{appLoading:t.flag});case r.SET_ALERT:return Object(ye.a)(Object(ye.a)({},e),{},{alerts:[t.newAlert].concat(Object(Ne.a)(e.alerts))});case r.REMOVE_ALERT:return Object(ye.a)(Object(ye.a)({},e),{},{alerts:Re(e,t.alertId)});default:return e}}var Le={common:Ie,auth:ke,books:Se};var Ae=n(124),Ge=f.a.mark(He),Ce=f.a.mark(Pe),De=f.a.mark(Xe),Ke=f.a.mark(Ze),qe=f.a.mark(Je),Me=f.a.mark(Qe),Ue=function(){return x.get("/api/v2/books")},Ve=function(e){return function(){return x.get("/api/v2/books/".concat(e))}},Ye=function(e){return function(){return x.post("/api/v2/books",e)}},Fe=function(e,t){return function(){return x.put("/api/v2/books/".concat(t),e)}},ze=function(e){return function(){return x.delete("/api/v2/books/".concat(e))}};function He(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.d)(g(!0));case 2:return t.prev=2,t.next=5,Object(m.b)(Ue);case 5:return e=t.sent,t.next=8,Object(m.d)($(e.data));case 8:return t.next=10,Object(m.d)(g(!1));case 10:t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(2),console.log(t.t0),t.next=17,T(t.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 17:case"end":return t.stop()}}),Ge,null,[[2,12]])}function Pe(e){var t,n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.book,r.next=3,Object(m.d)(g(!0));case 3:return r.prev=3,r.next=6,Object(m.b)(Ye(t));case 6:return n=r.sent,r.next=9,Object(m.d)($(n.data));case 9:return r.next=11,Object(m.d)(g(!1));case 11:return r.next=13,Object(m.d)(_({type:"success",text:"\u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u043e \u0438\u0449\u0438 \u0441\u0432\u043e\u044e \u043a\u043d\u0438\u0433\u0443 \u0432 \u043a\u043e\u043d\u0446\u0435 \u0445\u044b\u044b\u044b\u044b"}));case 13:r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(3),r.next=19,T(r.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445");case 19:case"end":return r.stop()}}),Ce,null,[[3,15]])}function Xe(e){var t,n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,r.next=3,Object(m.d)(g(!0));case 3:return r.prev=3,r.next=6,Object(m.b)(Ve(t));case 6:return n=r.sent,r.next=9,Object(m.d)(ee(n.data));case 9:return r.next=11,Object(m.d)(g(!1));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(3),r.next=17,T(r.t0,"\u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u043a\u043d\u0438\u0433\u0438");case 17:case"end":return r.stop()}}),De,null,[[3,13]])}function Ze(e){var t,n,r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.bookForm,n=e.id,a.next=3,Object(m.d)(g(!0));case 3:return a.prev=3,a.next=6,Object(m.b)(Fe(t,n));case 6:return r=a.sent,a.next=9,Object(m.d)(ee(r.data));case 9:return a.next=11,Object(m.d)(g(!1));case 11:return a.next=13,Object(m.d)(_({type:"success",text:"\u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u043e"}));case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(3),a.next=19,T(a.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445");case 19:case"end":return a.stop()}}),Ke,null,[[3,15]])}function Je(e){var t,n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,n=e.history,r.next=3,Object(m.d)(g(!0));case 3:return r.prev=3,r.next=6,Object(m.b)(ze(t));case 6:return r.next=8,Object(m.d)(_({type:"success",text:"\u0412\u0441\u0435 \u043a\u0440\u0443\u0442\u043e \u043a\u043d\u0438\u0433\u0430 \u0443\u0434\u0430\u043b\u043b\u0438\u0430\u0441\u044f"}));case 8:return r.next=10,Object(m.d)(g(!1));case 10:return r.next=12,Object(m.d)(W());case 12:n.push("/books"),r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(3),r.next=19,T(r.t0,"\u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u043a\u043d\u0438\u0433\u0438");case 19:case"end":return r.stop()}}),qe,null,[[3,15]])}function Qe(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.e)(r.EDIT_BOOK,Ze);case 2:return e.next=4,Object(m.e)(r.DELETE_BOOK,Je);case 4:return e.next=6,Object(m.e)(r.ADD_BOOK,Pe);case 6:return e.next=8,Object(m.e)(r.GET_BOOKS,He);case 8:return e.next=10,Object(m.e)(r.GET_BOOK,Xe);case 10:case"end":return e.stop()}}),Me)}var We=f.a.mark(et),$e=f.a.mark(tt);function et(e){var t,n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.alertId,n=e.timeout,!t||!n){r.next=6;break}return r.next=4,Object(m.c)(n);case 4:return r.next=6,Object(m.d)(y(t));case 6:case"end":return r.stop()}}),We)}function tt(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.e)(r.REMOVE_ALERT_TIMEOUT,et);case 2:case"end":return e.stop()}}),$e)}var nt=f.a.mark(rt);function rt(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)([K(),Qe(),tt()]);case 2:case"end":return e.stop()}}),nt)}var at=function(e){var t=Object(Ae.a)(),n=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Ee.d)(Object(Ee.a)(t)),r=Object(Ee.e)(Object(Ee.c)({common:Be,auth:Te,books:we}),e,n);return t.run(rt),r}(Le);i.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(d.a,{store:at,children:Object(M.jsx)(F,{children:Object(M.jsx)(_e.a,{children:Object(M.jsx)(ve,{})})})})}),document.getElementById("root")),ge()}},[[255,1,2]]]);
//# sourceMappingURL=main.230ceff4.chunk.js.map