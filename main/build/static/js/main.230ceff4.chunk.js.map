{"version":3,"sources":["entity/mutation.types.ts","helpers/hooks.ts","store/actions/auth.ts","helpers/axios.ts","store/actions/common.ts","store/sideEffects/errors.ts","store/sideEffects/auth.ts","components/GreatLoader.tsx","context/AuthProvider.tsx","components/FormBuilder.tsx","components/pages/Authoriztion.tsx","store/actions/books.ts","components/JustModal.tsx","components/AddBookModal.tsx","components/pages/Books.tsx","router/ProtectedRoute.tsx","components/pages/Registration.tsx","components/DeleteBookModal.tsx","components/EditBookModal.tsx","components/pages/Book.tsx","router/Router.tsx","components/Alert.tsx","App.tsx","reportWebVitals.ts","store/reducers/profile.ts","store/reducers/books.ts","store/reducers/common.ts","store/reducers/index.ts","store/sideEffects/books.ts","store/sideEffects/common.ts","store/sideEffects/index.ts","index.tsx","store/configureStore.ts"],"names":["MutationTypes","useAppDispatch","useDispatch","useAppSelector","useSelector","loginActionSuccess","data","type","LOGIN_SUCCESS","logoutAction","LOGOUT","AxiosInstanse","axios","create","baseURL","timeout","firstAppLoading","flag","FIRST_APP_LOADING","setAppLoading","SET_LOADING","setAlert","alert","newAlert","text","id","Date","getTime","store","dispatch","removeAlertTimeout","SET_ALERT","alertId","REMOVE_ALERT_TIMEOUT","removeAlert","REMOVE_ALERT","ErrorSaga","e","response","status","localStorage","setItem","LOCAL_STORAGE_KEY","put","AuthSaga","RegistrationSaga","GetUserByTokenSaga","AuthWatcher","login","post","registration","getUser","get","loginObj","history","call","token","defaults","headers","push","console","log","newUser","takeEvery","GET_USER_BY_TOKEN","REGISTRATION","LOGIN","GreatLoader","Spinner","animation","variant","AuthContext","createContext","undefined","useAuth","useContext","AuthProvider","children","useRef","current","a","auth","user","isAppLoading","common","currentToken","loginAction","logOut","registrationAction","useEffect","getItem","Provider","value","FormBuilder","formikInitialValue","fields","buttonName","onSubmit","schema","formik","useFormik","initialValues","validationSchema","values","className","Form","noValidate","validated","isValid","handleSubmit","map","Row","Group","Label","title","Control","required","valueName","name","onBlur","handleBlur","placeholder","onChange","handleChange","touched","errors","isInvalid","controlId","Button","Authorization","props","Yup","email","password","Alert","onClick","fetchBooks","GET_BOOKS","setBooksIntoState","SET_BOOKS","setBookIntoState","SET_BOOK","JustModal","show","onHide","submitButton","submitButtonText","showFooter","Modal","size","aria-labelledby","centered","Header","closeButton","Title","Body","Footer","AddBookModal","author","year","book","ADD_BOOK","ListOfBooks","useState","currentBooksList","setCurrentBooksList","modalShow","setModalShow","books","dispatchBooks","length","nextPage","where","currentBooks","i","Card","Subtitle","Text","format","ButtonToolbar","ButtonGroup","buttons","pagination","Math","ceil","ProtectedRoute","path","to","Registration","first_name","last_name","DeleteBookModal","deleteBook","DELETE_BOOK","deleteBookAction","EditBookModal","initialValue","moment","bookForm","EDIT_BOOK","Book","randomPictures","changeDeleteBook","editBook","changeEditBook","pictureIndex","changePictureIndex","currentBook","match","params","changeIndex","round","random","GET_BOOK","fetchBook","Img","src","Router","route","routeName","routeComponent","withRouter","private","loading","alerts","aria-live","aria-atomic","style","position","minHeight","top","right","Toast","backgroundColor","color","minWidth","onClose","App","appLoading","display","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialProfileStore","userReducer","state","action","SET_TOKEN","initialBooksStore","booksReducer","initialCommonStore","newAlerts","commonReducer","initialState","GetBooksSaga","AddBookSaga","GetBookSaga","EditBookSaga","DeleteBookSaga","BooksWatcher","getBooksApi","getBookApi","setBookApi","editBookApi","deleteBookApi","delete","TimeoutSaga","CommonWatcher","delay","rootSaga","all","saga","createSagaMiddleware","enchancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","createStore","combineReducers","run","configureStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.230ceff4.chunk.js","sourcesContent":["export enum MutationTypes {\n  FIRST_APP_LOADING = \"FIRST_APP_LOADING\",\n  SET_LOADING = \"SET_LOADING\",\n  SET_ALERT = \"SET_ALERT\",\n  REMOVE_ALERT = \"REMOVE_ALERT\",\n  REMOVE_ALERT_TIMEOUT = \"REMOVE_ALERT_TIMEOUT\",\n  LOGIN = \"LOGIN\",\n  LOGOUT = \"LOGOUT\",\n  REGISTRATION = \"REGISTRATION\",\n  GET_USER_BY_TOKEN = \"GET_USER_BY_TOKEN\",\n  LOGIN_SUCCESS = \"LOGIN_SUCCESS\",\n  SET_TOKEN = \"SET_TOKEN\",\n  GET_BOOKS = \"GET_BOOKS\",\n  SET_BOOKS = \"SET_BOOKS\",\n  GET_BOOK = \"GET_BOOK\",\n  SET_BOOK = \"SET_BOOK\",\n  ADD_BOOK = \"ADD_BOOK\",\n  EDIT_BOOK = \"EDIT_BOOK\",\n  DELETE_BOOK = \"DELETE_BOOK\",\n}\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"../index\";\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { MutationTypes } from \"../../entity/mutation.types\";\nimport { UserResponseType } from \"../../entity/user.types\";\nimport { History } from \"history\";\nimport { AuthorizationForm, RegistrationForm } from \"../../entity/form.types\";\nexport const loginAction = (\n  loginObj: AuthorizationForm,\n  history: History<unknown>\n) => {\n  return <const>{\n    type: MutationTypes.LOGIN,\n    loginObj,\n    history,\n  };\n};\nexport const registrationAction = (\n  newUser: RegistrationForm,\n  history: History<unknown>\n) => {\n  return <const>{\n    type: MutationTypes.REGISTRATION,\n    newUser,\n    history,\n  };\n};\n\nexport const getUserByToken = () => {\n  return <const>{\n    type: MutationTypes.GET_USER_BY_TOKEN,\n  };\n};\nexport const loginActionSuccess = (data: UserResponseType) =>\n  <const>{\n    type: MutationTypes.LOGIN_SUCCESS,\n    data,\n  };\nexport const setToken = (data: string) =>\n  <const>{\n    type: MutationTypes.SET_TOKEN,\n    token: data,\n  };\nexport const logoutAction = () =>\n  <const>{\n    type: MutationTypes.LOGOUT,\n  };\n","import axios from \"axios\";\n\nexport const AxiosInstanse = axios.create({\n  baseURL: \"http://localhost:3584\",\n  timeout: 15000,\n});\n","import { MutationTypes } from \"../../entity/mutation.types\";\nimport { Alert, AlertMessage } from \"../../entity/common.types\";\nimport { store } from \"../../index\";\n\nexport const firstAppLoading = (flag: boolean) =>\n  <const>{\n    type: MutationTypes.FIRST_APP_LOADING,\n    flag,\n  };\n\nexport const setAppLoading = (flag: boolean) =>\n  <const>{\n    type: MutationTypes.SET_LOADING,\n    flag,\n  };\n\nexport const setAlert = (alert: AlertMessage) => {\n  const newAlert: Alert = {\n    type: alert.type,\n    text: alert.text,\n    id: new Date().getTime(),\n  };\n  store.dispatch(removeAlertTimeout(newAlert.id, 5000));\n  return <const>{\n    type: MutationTypes.SET_ALERT,\n    newAlert,\n  };\n};\n\nexport const removeAlertTimeout = (alertId: number, timeout: number) =>\n  <const>{\n    type: MutationTypes.REMOVE_ALERT_TIMEOUT,\n    alertId,\n    timeout,\n  };\n\nexport const removeAlert = (alertId: number) =>\n  <const>{\n    type: MutationTypes.REMOVE_ALERT,\n    alertId,\n  };\n","import { AxiosError } from \"axios\";\nimport { put } from \"redux-saga/effects\";\nimport { logoutAction } from \"../actions/auth\";\nimport { setAlert, setAppLoading } from \"../actions/common\";\nimport { LOCAL_STORAGE_KEY } from \"./auth\";\n\nexport function* ErrorSaga(e: AxiosError, text: string) {\n  if (e.response?.status === 401) {\n    localStorage.setItem(LOCAL_STORAGE_KEY, \"\");\n    yield put(logoutAction());\n    yield put(setAlert({ type: \"error\", text: \"Вы должны авторизоваться\" }));\n  } else {\n    yield put(setAlert({ type: \"error\", text }));\n  }\n  yield put(setAppLoading(false));\n}\n","import { UserResponseType } from \"../../entity/user.types\";\nimport { call, takeEvery, put } from \"redux-saga/effects\";\nimport { AxiosInstanse } from \"../../helpers/axios\";\nimport { firstAppLoading, setAlert, setAppLoading } from \"../actions/common\";\nimport {\n  loginAction,\n  loginActionSuccess,\n  registrationAction,\n} from \"../actions/auth\";\nimport { MutationTypes } from \"../../entity/mutation.types\";\nimport { AxiosResponse } from \"axios\";\nimport { AuthorizationForm, RegistrationForm } from \"../../entity/form.types\";\nimport { ErrorSaga } from \"./errors\";\nconst login = (data: AuthorizationForm) => () =>\n  AxiosInstanse.post(\"/api/login\", data);\n\nconst registration = (data: RegistrationForm) => () =>\n  AxiosInstanse.post(\"/api/registration\", data);\n\nconst getUser = () => AxiosInstanse.get(\"/api/v2/user\");\n\nexport const LOCAL_STORAGE_KEY = \"auth_key\";\n\nfunction* AuthSaga({ loginObj, history }: ReturnType<typeof loginAction>) {\n  yield put(setAppLoading(true));\n  try {\n    const response: AxiosResponse<UserResponseType> = yield call(\n      login(loginObj)\n    );\n    localStorage.setItem(LOCAL_STORAGE_KEY, response.data.token);\n    AxiosInstanse.defaults.headers[\"Authorization\"] = response.data.token;\n    yield put(loginActionSuccess(response.data));\n    history.push(\"/books\");\n    yield put(setAppLoading(false));\n  } catch (e) {\n    console.log(e);\n    yield ErrorSaga(\n      e,\n      \"штото пошло не так, проверьте правильность вводимых данных\"\n    );\n  }\n}\n\nfunction* RegistrationSaga({\n  newUser,\n  history,\n}: ReturnType<typeof registrationAction>) {\n  yield put(setAppLoading(true));\n  try {\n    yield call(registration(newUser));\n    history.push(\"/authorization\");\n    yield put(\n      setAlert({\n        type: \"success\",\n        text: \"ты зарегался, заебись, теперь ты можешь с этими данными зайти\",\n      })\n    );\n    yield put(setAppLoading(false));\n  } catch (e) {\n    console.log(e);\n    yield ErrorSaga(\n      e,\n      \"штото пошло не так, проверьте правильность вводимых данных\"\n    );\n  }\n}\n\nfunction* GetUserByTokenSaga() {\n  try {\n    const response: AxiosResponse<UserResponseType> = yield call(getUser);\n    yield put(loginActionSuccess(response.data));\n    yield put(firstAppLoading(false));\n  } catch (e) {\n    console.log(e.response);\n    yield ErrorSaga(e, \"Токен устарел\");\n    yield put(firstAppLoading(false));\n  }\n}\n\nexport function* AuthWatcher() {\n  yield takeEvery(MutationTypes.GET_USER_BY_TOKEN, GetUserByTokenSaga);\n  yield takeEvery(MutationTypes.REGISTRATION, RegistrationSaga);\n  yield takeEvery(MutationTypes.LOGIN, AuthSaga);\n}\n","import React from \"react\";\nimport { Spinner } from \"react-bootstrap\";\n\nexport default function GreatLoader() {\n  return (\n    <>\n      <Spinner animation=\"border\" variant=\"primary\" />\n      <Spinner animation=\"border\" variant=\"secondary\" />\n      <Spinner animation=\"border\" variant=\"success\" />\n      <Spinner animation=\"border\" variant=\"danger\" />\n      <Spinner animation=\"border\" variant=\"warning\" />\n      <Spinner animation=\"border\" variant=\"info\" />\n      <Spinner animation=\"border\" variant=\"light\" />\n      <Spinner animation=\"border\" variant=\"dark\" />\n      <Spinner animation=\"grow\" variant=\"primary\" />\n      <Spinner animation=\"grow\" variant=\"secondary\" />\n      <Spinner animation=\"grow\" variant=\"success\" />\n      <Spinner animation=\"grow\" variant=\"danger\" />\n      <Spinner animation=\"grow\" variant=\"warning\" />\n      <Spinner animation=\"grow\" variant=\"info\" />\n      <Spinner animation=\"grow\" variant=\"light\" />\n      <Spinner animation=\"grow\" variant=\"dark\" />\n    </>\n  );\n}\n","import {\n  createContext,\n  FC,\n  ReactNode,\n  useContext,\n  useEffect,\n  useRef,\n} from \"react\";\nimport { History } from \"history\";\nimport { User } from \"../entity/user.types\";\nimport { useAppDispatch, useAppSelector } from \"../helpers/hooks\";\nimport {\n  getUserByToken,\n  loginAction,\n  logoutAction,\n  registrationAction,\n} from \"../store/actions/auth\";\nimport { AuthorizationForm, RegistrationForm } from \"../entity/form.types\";\nimport { LOCAL_STORAGE_KEY } from \"../store/sideEffects/auth\";\nimport { AxiosInstanse } from \"../helpers/axios\";\nimport GreatLoader from \"../components/GreatLoader\";\nimport { firstAppLoading } from \"../store/actions/common\";\ntype auth =\n  | {\n      currentToken: string;\n      user: User | undefined;\n      login(login: AuthorizationForm, history: History<unknown>): void;\n      logOut(): void;\n      registration(newUser: RegistrationForm, history: History<unknown>): void;\n    }\n  | undefined;\n\nconst AuthContext = createContext<auth>(undefined);\n\nexport const useAuth = () => {\n  return useContext(AuthContext);\n};\n\nexport const AuthProvider: FC<{ children: ReactNode }> = ({\n  children,\n}: {\n  children: ReactNode;\n}) => {\n  // ну да шобы линтер не ругался\n  const dispatch = useRef(useAppDispatch());\n  dispatch.current = useAppDispatch();\n  const { user, token } = useAppSelector((a) => a.auth);\n  const isAppLoading = useAppSelector((a) => a.common.firstAppLoading);\n  const auth = {\n    currentToken: token,\n    user,\n    login(login: AuthorizationForm, history: History<unknown>) {\n      dispatch.current(loginAction(login, history));\n    },\n    logOut() {\n      dispatch.current(logoutAction());\n    },\n    registration(newUser: RegistrationForm, history: History<unknown>) {\n      dispatch.current(registrationAction(newUser, history));\n    },\n  };\n  useEffect(() => {\n    const token = localStorage.getItem(LOCAL_STORAGE_KEY);\n    if (token) {\n      AxiosInstanse.defaults.headers[\"Authorization\"] = token;\n      dispatch.current(getUserByToken());\n    } else {\n      dispatch.current(firstAppLoading(false));\n    }\n  }, []);\n  return auth && !isAppLoading ? (\n    <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>\n  ) : (\n    <GreatLoader />\n  );\n};\n","import { useFormik } from \"formik\";\nimport { Button, Form } from \"react-bootstrap\";\nimport { FC } from \"react\";\nimport {\n  AuthorizationForm,\n  NewBookForm,\n  RegistrationForm,\n} from \"../entity/form.types\";\nimport { History } from \"history\";\n\nexport interface Field<T> {\n  type: \"text\" | \"password\" | \"date\";\n  valueName: keyof T;\n  title: string;\n  placeholder: string;\n  controlId: string;\n}\n\nexport interface FormBuilderI<T> {\n  formikInitialValue: T;\n  fields: Array<Field<T>>;\n  buttonName: string;\n  onSubmit(value: T, history?: History<unknown>): void;\n  schema: any;\n}\n\n// ТИП ТОЛЬКО ДЛЯ ФОРМ БИЛДЕРА\n// это плохо я знаю, но я пока хз как сделать так, чтобы все типы удовлетворяли одному инетрфейсу\n// поэтому просто сделал его локальным\ntype _FormUnion = RegistrationForm & AuthorizationForm & NewBookForm;\n\nexport const FormBuilder: FC<FormBuilderI<_FormUnion>> = ({\n  formikInitialValue,\n  fields,\n  buttonName,\n  onSubmit,\n  schema,\n}) => {\n  const formik = useFormik<_FormUnion>({\n    initialValues: formikInitialValue,\n    validationSchema: schema,\n    onSubmit: (values) => {\n      onSubmit(values);\n    },\n  });\n  return (\n    <div className=\"auth-form justify-content-center d-flex\">\n      <Form\n        noValidate\n        validated={formik.isValid}\n        onSubmit={formik.handleSubmit}\n      >\n        {fields.map((a) => (\n          <Form.Row key={a.controlId}>\n            <Form.Group>\n              <Form.Label>{a.title}</Form.Label>\n              <Form.Control\n                required\n                id={a.valueName}\n                name={a.valueName}\n                type={a.type}\n                onBlur={formik.handleBlur}\n                placeholder={a.placeholder}\n                value={formik.values[a.valueName]}\n                onChange={formik.handleChange}\n                isValid={\n                  formik.touched[a.valueName] && !formik.errors[a.valueName]\n                }\n                isInvalid={\n                  formik.touched[a.valueName] && !!formik.errors[a.valueName]\n                }\n              />\n            </Form.Group>\n          </Form.Row>\n        ))}\n        <Button type=\"submit\">{buttonName}</Button>\n      </Form>\n    </div>\n  );\n};\n","import { Alert } from \"react-bootstrap\";\nimport { FC } from \"react\";\nimport { useAppDispatch } from \"../../helpers/hooks\";\nimport { RouteComponentProps, StaticContext } from \"react-router\";\nimport { useAuth } from \"../../context/AuthProvider\";\nimport { AuthorizationForm } from \"../../entity/form.types\";\nimport * as Yup from \"yup\";\nimport { setAlert } from \"../../store/actions/common\";\nimport { Field, FormBuilder } from \"../FormBuilder\";\n\nexport const Authorization: FC<\n  RouteComponentProps<any, StaticContext, unknown>\n> = (props: RouteComponentProps) => {\n  const dispatch = useAppDispatch();\n  const auth = useAuth();\n\n  const initialValues: AuthorizationForm = {\n    email: \"\",\n    password: \"\",\n  };\n  const schema = Yup.object({\n    email: Yup.string().email(\"Invalid email address\").required(\"Required\"),\n    password: Yup.string().required(\"Required\"),\n  });\n\n  const submit = (values: AuthorizationForm) => {\n    if (auth) {\n      auth.login(values, props.history);\n    } else {\n      dispatch(setAlert({ type: \"error\", text: \"возникли какие-то проблемы\" }));\n    }\n  };\n  const fields: Array<Field<AuthorizationForm>> = [\n    {\n      type: \"text\",\n      valueName: \"email\",\n      title: \"E-mail\",\n      placeholder: \"\",\n      controlId: \"3\",\n    },\n    {\n      type: \"password\",\n      valueName: \"password\",\n      title: \"Пароль\",\n      placeholder: \"\",\n      controlId: \"4\",\n    },\n  ];\n  function registration() {\n    props.history.push(\"/registration\");\n  }\n  return (\n    <div className=\"auth-form justify-content-center d-flex\">\n      <FormBuilder\n        formikInitialValue={initialValues}\n        fields={fields}\n        buttonName={\"Войти\"}\n        onSubmit={submit}\n        schema={schema}\n      />\n      <Alert\n        onClick={registration}\n        className=\"cursor-pointer\"\n        variant=\"primary\"\n      >\n        Нет аккаунта? Зарегестрироваться\n      </Alert>\n    </div>\n  );\n};\n","import { MutationTypes } from \"../../entity/mutation.types\";\nimport { Book, BooksResponseType } from \"../../entity/books.types\";\nimport { NewBookForm } from \"../../entity/form.types\";\nimport { History } from \"history\";\n\nexport const fetchBooks = () =>\n  <const>{\n    type: MutationTypes.GET_BOOKS,\n  };\n\nexport const AddBook = (book: NewBookForm) =>\n  <const>{\n    type: MutationTypes.ADD_BOOK,\n    book,\n  };\n\nexport const EditBook = (bookForm: NewBookForm, id: string) =>\n  <const>{\n    type: MutationTypes.EDIT_BOOK,\n    bookForm,\n    id,\n  };\n\nexport const setBooksIntoState = (data: BooksResponseType) =>\n  <const>{\n    type: MutationTypes.SET_BOOKS,\n    data,\n  };\n\nexport const fetchBook = (id: string) =>\n  <const>{\n    type: MutationTypes.GET_BOOK,\n    id,\n  };\n\nexport const setBookIntoState = (data: Book) =>\n  <const>{\n    type: MutationTypes.SET_BOOK,\n    data,\n  };\n\nexport const deleteBookAction = (id: string, history: History<unknown>) =>\n  <const>{\n    type: MutationTypes.DELETE_BOOK,\n    id,\n    history,\n  };\n","import { Button, Modal } from \"react-bootstrap\";\nimport { FC, ReactNode } from \"react\";\n\nexport interface ModalI {\n  children: ReactNode;\n  show: boolean;\n  submitButton: boolean;\n  onSubmit(...any: any): void;\n  submitButtonText: string;\n  onHide(): void;\n  showFooter?: boolean;\n  text: string;\n}\n\nexport const JustModal: FC<ModalI> = ({\n  children,\n  show,\n  onHide,\n  submitButton,\n  submitButtonText,\n  onSubmit,\n  text,\n  showFooter = true,\n}) => {\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">{text}</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>{children}</Modal.Body>\n      {showFooter ? (\n        <Modal.Footer>\n          {submitButton ? (\n            <Button onClick={onSubmit}>{submitButtonText}</Button>\n          ) : (\n            <></>\n          )}\n          <Button onClick={onHide}>закрыть</Button>\n        </Modal.Footer>\n      ) : (\n        <></>\n      )}\n    </Modal>\n  );\n};\n","import { FC } from \"react\";\nimport { JustModal } from \"./JustModal\";\nimport { useAppDispatch } from \"../helpers/hooks\";\nimport { NewBookForm } from \"../entity/form.types\";\nimport * as Yup from \"yup\";\nimport { Field, FormBuilder } from \"./FormBuilder\";\nimport { AddBook } from \"../store/actions/books\";\nimport { History } from \"history\";\n\ninterface AddBookModalI {\n  show: boolean;\n  onHide(): void;\n  history: History<unknown>;\n}\n\nexport const AddBookModal: FC<AddBookModalI> = ({ show, onHide, history }) => {\n  const dispatch = useAppDispatch();\n\n  const submit = (values: NewBookForm) => {\n    dispatch(AddBook(values));\n    onHide();\n  };\n\n  const initialValue: NewBookForm = {\n    title: \"\",\n    author: \"\",\n    year: \"\",\n  };\n\n  const schema = Yup.object({\n    title: Yup.string().required(\"Required\"),\n    author: Yup.string().required(\"Required\"),\n    year: Yup.date().required(\"Required\"),\n  });\n\n  const fields: Array<Field<NewBookForm>> = [\n    {\n      type: \"text\",\n      valueName: \"title\",\n      title: \"Название\",\n      placeholder: \"\",\n      controlId: \"1\",\n    },\n    {\n      type: \"text\",\n      valueName: \"author\",\n      title: \"Автор\",\n      placeholder: \"\",\n      controlId: \"2\",\n    },\n    {\n      type: \"date\",\n      valueName: \"year\",\n      title: \"Год\",\n      placeholder: \"\",\n      controlId: \"3\",\n    },\n  ];\n  return (\n    <JustModal\n      show={show}\n      onHide={() => onHide()}\n      onSubmit={() => {}}\n      submitButton={false}\n      submitButtonText={\"\"}\n      text={\"Добавь книгу\"}\n      showFooter={false}\n    >\n      <FormBuilder\n        formikInitialValue={initialValue}\n        fields={fields}\n        buttonName={\"новая книга\"}\n        onSubmit={submit}\n        schema={schema}\n      />\n    </JustModal>\n  );\n};\n","import { useAppDispatch, useAppSelector } from \"../../helpers/hooks\";\nimport { FC, ReactElement, useEffect, useRef, useState } from \"react\";\nimport { fetchBooks } from \"../../store/actions/books\";\nimport { Button, ButtonGroup, ButtonToolbar, Card } from \"react-bootstrap\";\nimport { Book } from \"../../entity/books.types\";\nimport Moment from \"react-moment\";\nimport { RouteComponentProps, StaticContext } from \"react-router\";\nimport { AddBookModal } from \"../AddBookModal\";\n\nexport const ListOfBooks: FC<\n  RouteComponentProps<any, StaticContext, unknown>\n> = (props: RouteComponentProps) => {\n  // может когда-нибудь мне будет не лень сделать пагинацию с выбором числа итемов\n  // а может даже серверную\n  const itemsPerList = 5;\n  const [currentBooksList, setCurrentBooksList] = useState<Array<Book>>([]);\n  const [modalShow, setModalShow] = useState(false);\n  const books = useAppSelector((a) => a.books.books);\n  const dispatch = useAppDispatch();\n  // шобы линтер не ругался\n  const dispatchBooks = useRef(() => {});\n  dispatchBooks.current = () => {\n    dispatch(fetchBooks());\n  };\n  useEffect(() => {\n    dispatchBooks.current();\n  }, []);\n  useEffect(() => {\n    if (books.length > 0) {\n      nextPage.current(itemsPerList)();\n    }\n  }, [books]);\n  function getBooksLength(): number {\n    return books.length;\n  }\n  // шобы линтер не ругался\n  const nextPage = useRef((where: number) => () => {\n    console.log(where);\n  });\n  nextPage.current = (where: number) => {\n    return () => {\n      const currentBooks: Array<Book> = [];\n      for (let i = where - itemsPerList; i < where; i++) {\n        if (books[i]) {\n          currentBooks.push(books[i]);\n        }\n      }\n      setCurrentBooksList(currentBooks);\n    };\n  };\n  function buttons(): Array<ReactElement> {\n    const buttons: Array<ReactElement> = [];\n    const pagination = Math.ceil(getBooksLength() / itemsPerList);\n    for (let i = 1; i <= pagination; i++) {\n      buttons.push(\n        <Button\n          key={`${new Date()}_${i}`}\n          onClick={nextPage.current(itemsPerList * i)}\n        >\n          {i}\n        </Button>\n      );\n    }\n    return buttons;\n  }\n  return (\n    <div>\n      {currentBooksList.map((a) => (\n        <Card\n          onClick={() => props.history.push(`/books/${a.id}`)}\n          key={a.id}\n          className=\"book-card cursor-pointer my-2\"\n        >\n          <Card.Body>\n            <Card.Title>{a.title}</Card.Title>\n            <Card.Subtitle className=\"mb-2 text-muted\">\n              {a.author}\n            </Card.Subtitle>\n            <Card.Text>\n              <Moment format=\"DD.MM.YYYY\">{a.year}</Moment>\n            </Card.Text>\n          </Card.Body>\n        </Card>\n      ))}\n      <ButtonToolbar>\n        <ButtonGroup>{buttons()}</ButtonGroup>\n      </ButtonToolbar>\n      <Button\n        onClick={() => setModalShow(true)}\n        className=\"mt-5\"\n        variant=\"success\"\n      >\n        Добавить книгу\n      </Button>\n      <AddBookModal\n        show={modalShow}\n        onHide={() => setModalShow(false)}\n        history={props.history}\n      />\n    </div>\n  );\n};\n","import { useAuth } from \"../context/AuthProvider\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { ReactNode } from \"react\";\n\nexport default function ProtectedRoute({\n  children,\n  path,\n}: {\n  children: ReactNode;\n  path: string;\n}) {\n  const auth = useAuth();\n  return auth && auth.currentToken ? (\n    <Route path={path}>{children}</Route>\n  ) : (\n    <Redirect to={\"/authorization\"} />\n  );\n}\n","import { FC } from \"react\";\nimport { RouteComponentProps, StaticContext } from \"react-router\";\nimport { useAuth } from \"../../context/AuthProvider\";\nimport * as Yup from \"yup\";\nimport { Field, FormBuilder } from \"../FormBuilder\";\nimport { RegistrationForm } from \"../../entity/form.types\";\nimport { useAppDispatch } from \"../../helpers/hooks\";\nimport { setAlert } from \"../../store/actions/common\";\n\nexport const Registration: FC<\n  RouteComponentProps<any, StaticContext, unknown>\n> = (props: RouteComponentProps) => {\n  const auth = useAuth();\n  const dispatch = useAppDispatch();\n\n  const submit = (values: RegistrationForm) => {\n    if (auth) {\n      auth.registration(values, props.history);\n    } else {\n      dispatch(setAlert({ type: \"error\", text: \"возникли какие-то проблемы\" }));\n    }\n  };\n\n  const initialValue: RegistrationForm = {\n    first_name: \"\",\n    last_name: \"\",\n    email: \"\",\n    password: \"\",\n  };\n\n  const schema = Yup.object({\n    first_name: Yup.string().required(\"Required\"),\n    last_name: Yup.string().required(\"Required\"),\n    email: Yup.string().email(\"Invalid email address\").required(\"Required\"),\n    password: Yup.string().required(\"Required\"),\n  });\n\n  const fields: Array<Field<RegistrationForm>> = [\n    {\n      type: \"text\",\n      valueName: \"first_name\",\n      title: \"Имя\",\n      placeholder: \"\",\n      controlId: \"1\",\n    },\n    {\n      type: \"text\",\n      valueName: \"last_name\",\n      title: \"Фамилия\",\n      placeholder: \"\",\n      controlId: \"2\",\n    },\n    {\n      type: \"text\",\n      valueName: \"email\",\n      title: \"E-mail\",\n      placeholder: \"\",\n      controlId: \"3\",\n    },\n    {\n      type: \"password\",\n      valueName: \"password\",\n      title: \"Пароль\",\n      placeholder: \"\",\n      controlId: \"4\",\n    },\n  ];\n\n  return (\n    <div className=\"auth-form justify-content-center d-flex\">\n      <FormBuilder\n        formikInitialValue={initialValue}\n        fields={fields}\n        buttonName={\"зарегаться\"}\n        onSubmit={submit}\n        schema={schema}\n      />\n    </div>\n  );\n};\n","import { FC } from \"react\";\nimport { JustModal } from \"./JustModal\";\nimport { useAppDispatch } from \"../helpers/hooks\";\nimport { History } from \"history\";\nimport { deleteBookAction } from \"../store/actions/books\";\n\ninterface DeleteBookModalI {\n  id: string;\n  onHide(): void;\n  show: boolean;\n  history: History<unknown>;\n}\n\nexport const DeleteBookModal: FC<DeleteBookModalI> = ({\n  id,\n  onHide,\n  show,\n  history,\n}) => {\n  const dispatch = useAppDispatch();\n  function deleteBook() {\n    dispatch(deleteBookAction(id, history));\n  }\n  return (\n    <JustModal\n      show={show}\n      submitButton={true}\n      onSubmit={() => deleteBook()}\n      submitButtonText={\"Удалить\"}\n      onHide={() => onHide()}\n      text={\"Удаление книги\"}\n    >\n      <div>Вы действительно хотите удалить это</div>\n    </JustModal>\n  );\n};\n","import { FC } from \"react\";\nimport { JustModal } from \"./JustModal\";\nimport { useAppDispatch } from \"../helpers/hooks\";\nimport { NewBookForm } from \"../entity/form.types\";\nimport * as Yup from \"yup\";\nimport { Field, FormBuilder } from \"./FormBuilder\";\nimport { EditBook } from \"../store/actions/books\";\nimport { Book } from \"../entity/books.types\";\nimport moment from \"moment\";\n\ninterface AddBookModalI {\n  show: boolean;\n  onHide(): void;\n  book: Book;\n}\n\nexport const EditBookModal: FC<AddBookModalI> = ({ show, onHide, book }) => {\n  const dispatch = useAppDispatch();\n\n  const submit = (values: NewBookForm) => {\n    dispatch(EditBook(values, `${book.id}`));\n    onHide();\n  };\n\n  const initialValue: NewBookForm = {\n    title: book.title,\n    author: book.author,\n    year: moment(book.year).format(\"YYYY-MM-DD\"),\n  };\n\n  const schema = Yup.object({\n    title: Yup.string().required(\"Required\"),\n    author: Yup.string().required(\"Required\"),\n    year: Yup.date().required(\"Required\"),\n  });\n\n  const fields: Array<Field<NewBookForm>> = [\n    {\n      type: \"text\",\n      valueName: \"title\",\n      title: \"Название\",\n      placeholder: \"\",\n      controlId: \"1\",\n    },\n    {\n      type: \"text\",\n      valueName: \"author\",\n      title: \"Автор\",\n      placeholder: \"\",\n      controlId: \"2\",\n    },\n    {\n      type: \"date\",\n      valueName: \"year\",\n      title: \"Год\",\n      placeholder: \"\",\n      controlId: \"3\",\n    },\n  ];\n  return (\n    <JustModal\n      show={show}\n      onHide={() => onHide()}\n      onSubmit={() => {}}\n      submitButton={false}\n      submitButtonText={\"\"}\n      text={\"Измени книгу\"}\n      showFooter={false}\n    >\n      <FormBuilder\n        formikInitialValue={initialValue}\n        fields={fields}\n        buttonName={\"изменить\"}\n        onSubmit={submit}\n        schema={schema}\n      />\n    </JustModal>\n  );\n};\n","import { FC, useEffect, useRef, useState } from \"react\";\nimport { RouteComponentProps, StaticContext } from \"react-router\";\nimport { useAppDispatch, useAppSelector } from \"../../helpers/hooks\";\nimport { fetchBook } from \"../../store/actions/books\";\nimport { Button, Card } from \"react-bootstrap\";\nimport Moment from \"react-moment\";\nimport { DeleteBookModal } from \"../DeleteBookModal\";\nimport { EditBookModal } from \"../EditBookModal\";\n\ninterface ViewBookParams {\n  id: string;\n}\n\nexport const Book: FC<\n  RouteComponentProps<ViewBookParams, StaticContext, unknown>\n> = (props: RouteComponentProps<ViewBookParams>) => {\n  const randomPictures: Array<string> = [\n    \"https://tlgrm.eu/_/stickers/b12/d5f/b12d5fb5-fbd0-3a2d-99fc-2642b586f219/2.jpg\",\n    \"https://static.wikia.nocookie.net/36689b26-ddcb-4ae6-a8c0-33b165fb6bcd\",\n    \"https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/1209ea8d93d/b040e8b2b7aeb701e436e/1472075717_1397934971_image.jpg\",\n    \"https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/707e18cc5da/8719cc8272f4a5b57aa64/1472097606_image.jpg\",\n    \"https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/9c601aca149/f9efb55a108f9c805cf97/1417725120_image.jpg\",\n    \"https://i.ytimg.com/vi/hCpnNCqjULw/maxresdefault.jpg\",\n    \"https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/90dc2512709/05953e2add74dbac18317/1415193181_image.jpg\",\n    \"http://i.mycdn.me/i?r=AEHujHvw2RjEbemUCNEorZbxYpb_p_9AcN2FmGik64KrkRZtvDpGZlB7IRDnkDh2-EF7Zi9s0CiBOSDmbngC-I-k&fn=external_8\",\n    \"https://user92966.clients-cdnnow.ru/upload/setka-editor/a1c/a1cd53320de0951efc82d79db29afc44.jpg.webp\",\n    \"https://user92966.clients-cdnnow.ru/upload/setka-editor/0fe/0fe5f8ef5cc10ec303873a01d39ec01d.jpg.webp\",\n    \"https://sun9-69.userapi.com/impg/ae9mYIT5fRNtgCKP9m5d8wz6ZgqVkDt5JV1u2A/2jRtGN37Ht8.jpg?size=1920x1080&quality=96&sign=211aaf2a866dde1148f548273cbbe14b&type=album\",\n    \"https://sun9-53.userapi.com/impg/6d_zXlOn97SGWJdbrh9zb5ktYlyOUPQIVbmGTA/OM3iO6poYyQ.jpg?size=1925x863&quality=96&sign=28d45dd729e6e8ab6de0977379f2c039&type=album\",\n    \"https://sun9-19.userapi.com/impg/jmdNejMU9wxKV13PfjAhXjWIS5mLs6cXJ1YRlA/K-XxkGAuzbo.jpg?size=1920x1080&quality=96&sign=fd224e2ad334871c1ad6afb999fb9ab6&type=album\",\n    \"https://sun9-20.userapi.com/impg/SmBVN_ZAYSjpU6xM5VV1gYFRN-dFzBOk0jUTiQ/IH80pVkkFgc.jpg?size=1920x1080&quality=96&sign=4ec042afb016c1e7e493eda5a1c303f3&type=album\",\n  ];\n  const [deleteBook, changeDeleteBook] = useState(false);\n  const [editBook, changeEditBook] = useState(false);\n  const [pictureIndex, changePictureIndex] = useState(0);\n  const book = useAppSelector((a) => a.books.currentBook);\n  const id = props.match.params.id;\n  const changeIndex = useRef(() =>\n    changePictureIndex(Math.round(Math.random() * randomPictures.length - 1))\n  );\n\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    changeIndex.current();\n    dispatch(fetchBook(id));\n  }, [dispatch, id]);\n  return book ? (\n    <div>\n      <div className=\"d-flex mt-5 justify-content-end\">\n        <Button onClick={() => changeDeleteBook(true)} variant=\"danger\">\n          Удалить книгу\n        </Button>\n      </div>\n      <DeleteBookModal\n        id={id}\n        onHide={() => changeDeleteBook(false)}\n        show={deleteBook}\n        history={props.history}\n      />\n      <Card className=\"book-card my-2\">\n        <Card.Img src={randomPictures[pictureIndex]} />\n        <Card.Body>\n          <Card.Title>{book.title}</Card.Title>\n          <Card.Subtitle className=\"mb-2 text-muted\">\n            {book.author}\n          </Card.Subtitle>\n          <Card.Text>\n            <Moment format=\"DD.MM.YYYY\">{book.year}</Moment>\n          </Card.Text>\n          <Button onClick={() => changeEditBook(true)} variant=\"primary\">\n            Изменить книгу\n          </Button>\n          <EditBookModal\n            show={editBook}\n            onHide={() => changeEditBook(false)}\n            book={book}\n          />\n        </Card.Body>\n      </Card>\n    </div>\n  ) : (\n    <div>ъаъа</div>\n  );\n};\n","import { Redirect, Route, Switch, withRouter } from \"react-router-dom\";\nimport { RouteI } from \"./router.types\";\nimport { Authorization } from \"../components/pages/Authoriztion\";\nimport { ListOfBooks } from \"../components/pages/Books\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport { Registration } from \"../components/pages/Registration\";\nimport { Book } from \"../components/pages/Book\";\n\nexport default function Router() {\n  const route: Array<RouteI> = [\n    {\n      routeName: \"/registration\",\n      routeComponent: withRouter(Registration),\n      private: false,\n    },\n    {\n      routeName: \"/authorization\",\n      routeComponent: withRouter(Authorization),\n      private: false,\n    },\n    {\n      routeName: \"/books/:id\",\n      routeComponent: withRouter(Book),\n      private: true,\n    },\n    {\n      routeName: \"/books\",\n      routeComponent: withRouter(ListOfBooks),\n      private: true,\n    },\n    {\n      routeName: \"/\",\n      routeComponent: <Redirect to=\"/books\" />,\n      private: true,\n    },\n  ];\n  return (\n    <Switch>\n      {route.map((a: RouteI) =>\n        a.private ? (\n          <ProtectedRoute key={a.routeName} path={a.routeName}>\n            {a.routeComponent}\n          </ProtectedRoute>\n        ) : (\n          <Route key={a.routeName} path={a.routeName}>\n            {a.routeComponent}\n          </Route>\n        )\n      )}\n    </Switch>\n  );\n}\n","import { Toast } from \"react-bootstrap\";\nimport { useAppDispatch, useAppSelector } from \"../helpers/hooks\";\nimport { removeAlert } from \"../store/actions/common\";\n\nexport default function Alert() {\n  const dispatch = useAppDispatch();\n  const loading = useAppSelector((a) => a.common.alerts);\n  function removeAlertById(id: number) {\n    return () => {\n      dispatch(removeAlert(id));\n    };\n  }\n  return (\n    <div\n      aria-live=\"polite\"\n      aria-atomic=\"true\"\n      style={{\n        position: \"absolute\",\n        minHeight: \"200px\",\n        top: 0,\n        right: 0,\n      }}\n    >\n      {loading.map((a) => (\n        <Toast\n          key={a.id}\n          style={{\n            backgroundColor: a.type === \"success\" ? \"green\" : \"red\",\n            color: \"white\",\n            minWidth: 200,\n          }}\n          onClose={removeAlertById(a.id)}\n        >\n          <Toast.Header>\n            <strong className=\"mr-auto\">\n              {a.type === \"success\" ? \"Заебись\" : \"Ошибка\"}\n            </strong>\n            <small>just now</small>\n          </Toast.Header>\n          <Toast.Body>{a.text}</Toast.Body>\n        </Toast>\n      ))}\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport Router from \"./router/Router\";\nimport GreatLoader from \"./components/GreatLoader\";\nimport { useAppDispatch, useAppSelector } from \"./helpers/hooks\";\nimport Alert from \"./components/Alert\";\nimport { useAuth } from \"./context/AuthProvider\";\nimport { Button } from \"react-bootstrap\";\nimport { logoutAction } from \"./store/actions/auth\";\n\nfunction App() {\n  const loading = useAppSelector((a) => a.common.appLoading);\n  const dispatch = useAppDispatch();\n  function logout() {\n    dispatch(logoutAction());\n  }\n  const auth = useAuth();\n  return (\n    <div className=\"App\">\n      <div style={!loading ? { display: \"none\" } : {}}>\n        <GreatLoader />\n      </div>\n      <div className=\"app_container\" style={loading ? { display: \"none\" } : {}}>\n        <Router />\n        <Alert />\n      </div>\n      {auth && auth.user && (\n        <Button\n          variant=\"danger\"\n          size=\"lg\"\n          className=\"logout-button\"\n          onClick={logout}\n        >\n          логаут\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { User } from \"../../entity/user.types\";\nimport { MutationTypes } from \"../../entity/mutation.types\";\nimport { CoolType } from \"../actions\";\n\nexport interface AuthReducer {\n  token: string;\n  user: User | undefined;\n}\n\nexport let initialProfileStore: AuthReducer = {\n  token: \"\",\n  user: undefined,\n};\n\nexport default function userReducer(\n  state = initialProfileStore,\n  action: CoolType\n): AuthReducer {\n  switch (action.type) {\n    case MutationTypes.LOGIN_SUCCESS:\n      return {\n        ...state,\n        user: action.data.user,\n        token: action.data.token,\n      };\n    case MutationTypes.SET_TOKEN:\n      return {\n        ...state,\n        token: action.token,\n      };\n    case MutationTypes.LOGOUT:\n      return {\n        ...state,\n        token: \"\",\n        user: undefined,\n      };\n    default:\n      return state;\n  }\n}\n","import { Book, BooksResponseType } from \"../../entity/books.types\";\nimport { MutationTypes } from \"../../entity/mutation.types\";\nimport { CoolType } from \"../actions\";\n\nexport interface BookReducer {\n  books: BooksResponseType;\n  currentBook: Book | null;\n}\n\nexport let initialBooksStore: BookReducer = {\n  books: [],\n  currentBook: null,\n};\n\nexport default function booksReducer(\n  state = initialBooksStore,\n  action: CoolType\n): BookReducer {\n  switch (action.type) {\n    case MutationTypes.SET_BOOKS:\n      return {\n        ...state,\n        books: action.data,\n      };\n    case MutationTypes.SET_BOOK:\n      return {\n        ...state,\n        currentBook: action.data,\n      };\n    default:\n      return state;\n  }\n}\n","import { CoolType } from \"../actions\";\nimport { MutationTypes } from \"../../entity/mutation.types\";\nimport { Alert } from \"../../entity/common.types\";\n\nexport interface CommonReducer {\n  alerts: Array<Alert>;\n  appLoading: boolean;\n  firstAppLoading: boolean;\n}\n\nexport const initialCommonStore: CommonReducer = {\n  alerts: [],\n  appLoading: false,\n  firstAppLoading: true,\n};\n\nfunction removeAlert(state: CommonReducer, id: number): Array<Alert> {\n  const newAlerts: Array<Alert> = [];\n  for (let i = 0; i < state.alerts.length; i++) {\n    if (state.alerts[i].id !== id) {\n      newAlerts.push(state.alerts[i]);\n    }\n  }\n\n  return newAlerts;\n}\n\nexport default function commonReducer(\n  state = initialCommonStore,\n  action: CoolType\n): CommonReducer {\n  switch (action.type) {\n    case MutationTypes.FIRST_APP_LOADING:\n      return {\n        ...state,\n        firstAppLoading: action.flag,\n      };\n    case MutationTypes.SET_LOADING:\n      return {\n        ...state,\n        appLoading: action.flag,\n      };\n    case MutationTypes.SET_ALERT:\n      return {\n        ...state,\n        alerts: [action.newAlert, ...state.alerts],\n      };\n    case MutationTypes.REMOVE_ALERT:\n      return {\n        ...state,\n        alerts: removeAlert(state, action.alertId),\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers, Reducer } from \"redux\";\nimport userReducer, { AuthReducer, initialProfileStore } from \"./profile\";\nimport booksReducer, { BookReducer, initialBooksStore } from \"./books\";\nimport commonReducer, { CommonReducer, initialCommonStore } from \"./common\";\n\nexport interface AppStore {\n  common: CommonReducer;\n  auth: AuthReducer;\n  books: BookReducer;\n}\n\nexport const initialState: AppStore = {\n  common: initialCommonStore,\n  auth: initialProfileStore,\n  books: initialBooksStore,\n};\n\nexport default function createReducers(): Reducer<AppStore> {\n  return combineReducers<AppStore>({\n    common: commonReducer,\n    auth: userReducer,\n    books: booksReducer,\n  });\n}\n","import { AxiosInstanse } from \"../../helpers/axios\";\nimport { call, takeEvery, put } from \"redux-saga/effects\";\nimport { Book, BooksResponseType } from \"../../entity/books.types\";\nimport { MutationTypes } from \"../../entity/mutation.types\";\nimport {\n  AddBook,\n  deleteBookAction,\n  EditBook,\n  fetchBook,\n  fetchBooks,\n  setBookIntoState,\n  setBooksIntoState,\n} from \"../actions/books\";\nimport { AxiosResponse } from \"axios\";\nimport { setAlert, setAppLoading } from \"../actions/common\";\nimport { NewBookForm } from \"../../entity/form.types\";\nimport { ErrorSaga } from \"./errors\";\n\nconst getBooksApi = () => AxiosInstanse.get(\"/api/v2/books\");\n\nconst getBookApi = (id: string) => () =>\n  AxiosInstanse.get(`/api/v2/books/${id}`);\n\nconst setBookApi = (book: NewBookForm) => () =>\n  AxiosInstanse.post(\"/api/v2/books\", book);\n\nconst editBookApi = (book: NewBookForm, id: string) => () =>\n  AxiosInstanse.put(`/api/v2/books/${id}`, book);\n\nconst deleteBookApi = (id: string) => () =>\n  AxiosInstanse.delete(`/api/v2/books/${id}`);\n\nfunction* GetBooksSaga() {\n  yield put(setAppLoading(true));\n  try {\n    const books: AxiosResponse<BooksResponseType> = yield call(getBooksApi);\n    yield put(setBooksIntoState(books.data));\n    yield put(setAppLoading(false));\n  } catch (e) {\n    console.log(e);\n    yield ErrorSaga(e, \"штото пошло не так\");\n  }\n}\n\nfunction* AddBookSaga({ book }: ReturnType<typeof AddBook>) {\n  yield put(setAppLoading(true));\n  try {\n    const books: AxiosResponse<BooksResponseType> = yield call(\n      setBookApi(book)\n    );\n    yield put(setBooksIntoState(books.data));\n    yield put(setAppLoading(false));\n    yield put(\n      setAlert({\n        type: \"success\",\n        text: \"все круто ищи свою книгу в конце хыыыы\",\n      })\n    );\n  } catch (e) {\n    yield ErrorSaga(e, \"штото пошло не так, проверьте правильность данных\");\n  }\n}\n\nfunction* GetBookSaga({ id }: ReturnType<typeof fetchBook>) {\n  yield put(setAppLoading(true));\n  try {\n    const book: AxiosResponse<Book> = yield call(getBookApi(id));\n    yield put(setBookIntoState(book.data));\n    yield put(setAppLoading(false));\n  } catch (e) {\n    yield ErrorSaga(e, \"нет такой книги\");\n  }\n}\n\nfunction* EditBookSaga({ bookForm, id }: ReturnType<typeof EditBook>) {\n  yield put(setAppLoading(true));\n  try {\n    const book: AxiosResponse<Book> = yield call(editBookApi(bookForm, id));\n    yield put(setBookIntoState(book.data));\n    yield put(setAppLoading(false));\n    yield put(\n      setAlert({\n        type: \"success\",\n        text: \"все круто\",\n      })\n    );\n  } catch (e: any) {\n    yield ErrorSaga(e, \"штото пошло не так, проверьте правильность данных\");\n  }\n}\n\nfunction* DeleteBookSaga({ id, history }: ReturnType<typeof deleteBookAction>) {\n  yield put(setAppLoading(true));\n  try {\n    yield call(deleteBookApi(id));\n    yield put(setAlert({ type: \"success\", text: \"Все круто книга удаллиася\" }));\n    yield put(setAppLoading(false));\n    yield put(fetchBooks());\n    history.push(\"/books\");\n  } catch (e) {\n    yield ErrorSaga(e, \"нет такой книги\");\n  }\n}\n\nexport function* BooksWatcher() {\n  yield takeEvery(MutationTypes.EDIT_BOOK, EditBookSaga);\n  yield takeEvery(MutationTypes.DELETE_BOOK, DeleteBookSaga);\n  yield takeEvery(MutationTypes.ADD_BOOK, AddBookSaga);\n  yield takeEvery(MutationTypes.GET_BOOKS, GetBooksSaga);\n  yield takeEvery(MutationTypes.GET_BOOK, GetBookSaga);\n}\n","import { put, takeEvery, delay } from \"redux-saga/effects\";\nimport { removeAlert, removeAlertTimeout } from \"../actions/common\";\nimport { MutationTypes } from \"../../entity/mutation.types\";\n\nexport function* TimeoutSaga({\n  alertId,\n  timeout,\n}: ReturnType<typeof removeAlertTimeout>) {\n  if (alertId && timeout) {\n    yield delay(timeout);\n    yield put(removeAlert(alertId));\n  }\n}\nexport function* CommonWatcher() {\n  yield takeEvery(MutationTypes.REMOVE_ALERT_TIMEOUT, TimeoutSaga);\n}\n","import { all } from \"redux-saga/effects\";\nimport { AuthWatcher } from \"./auth\";\nimport { BooksWatcher } from \"./books\";\nimport { CommonWatcher } from \"./common\";\nexport default function* rootSaga() {\n  yield all([AuthWatcher(), BooksWatcher(), CommonWatcher()]);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport configureStore from \"./store/configureStore\";\nimport { initialState } from \"./store/reducers\";\nimport { AuthProvider } from \"./context/AuthProvider\";\n\nexport const store = configureStore(initialState);\nexport type RootState = ReturnType<typeof store.getState>;\n\nexport type AppDispatch = typeof store.dispatch;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <AuthProvider>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </AuthProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { applyMiddleware, createStore, Store, compose } from \"redux\";\nimport createReducers, { AppStore } from \"./reducers\";\nimport { CoolType } from \"./actions\";\nimport createSagaMiddleware from \"redux-saga\";\nimport rootSaga from \"./sideEffects\";\nexport default function configureStore(\n  initialState: AppStore\n): Store<AppStore, CoolType> {\n  const saga = createSagaMiddleware();\n  // @ts-ignore\n  const composeEnhancers =\n    // @ts-ignore\n    typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n      ? // @ts-ignore\n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n      : compose;\n  const enchancers = composeEnhancers(applyMiddleware(saga));\n  const store = createStore<AppStore, CoolType, unknown, unknown>(\n    createReducers(),\n    initialState,\n    enchancers\n  );\n  saga.run(rootSaga);\n  return store;\n}\n"],"sourceRoot":""}