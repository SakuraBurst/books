(this.webpackJsonpbooks_front=this.webpackJsonpbooks_front||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return ct}));var r,a=n(0),c=n.n(a),o=n(27),i=n.n(o),u=(n(129),n(130),n(13)),s=n(257),d=n(50),l=function(){return Object(d.b)()},b=d.c,j=n(1),O=function(){var e=b((function(e){return e.auth.token}));return Object(j.jsx)("div",{children:Object(j.jsx)(s.a,{variant:"success",children:e})})},p=n(263);!function(e){e.FIRST_APP_LOADING="FIRST_APP_LOADING",e.SET_LOADING="SET_LOADING",e.SET_ALERT="SET_ALERT",e.REMOVE_ALERT="REMOVE_ALERT",e.REMOVE_ALERT_TIMEOUT="REMOVE_ALERT_TIMEOUT",e.LOGIN="LOGIN",e.LOGOUT="LOGOUT",e.REGISTRATION="REGISTRATION",e.GET_USER_BY_TOKEN="GET_USER_BY_TOKEN",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.SET_TOKEN="SET_TOKEN",e.GET_BOOKS="GET_BOOKS",e.SET_BOOKS="SET_BOOKS",e.GET_BOOK="GET_BOOK",e.SET_BOOK="SET_BOOK",e.ADD_BOOK="ADD_BOOK",e.EDIT_BOOK="EDIT_BOOK",e.DELETE_BOOK="DELETE_BOOK"}(r||(r={}));var f=function(e){return{type:r.LOGIN_SUCCESS,data:e}},m=function(){return{type:r.LOGOUT}},h=n(11),x=n.n(h),v=n(6),g=n(117),_=n.n(g).a.create({baseURL:"http://192.168.0.144:3584",timeout:15e3}),E=function(e){return{type:r.FIRST_APP_LOADING,flag:e}},y=function(e){return{type:r.SET_LOADING,flag:e}},k=function(e){var t={type:e.type,text:e.text,id:(new Date).getTime()};return ct.dispatch(T(t.id,5e3)),{type:r.SET_ALERT,newAlert:t}},T=function(e,t){return{type:r.REMOVE_ALERT_TIMEOUT,alertId:e,timeout:t}},S=function(e){return{type:r.REMOVE_ALERT,alertId:e}},w=x.a.mark(N);function N(e,t){var n;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(401!==(null===(n=e.response)||void 0===n?void 0:n.status)){r.next=8;break}return localStorage.setItem(D,""),r.next=4,Object(v.d)(m());case 4:return r.next=6,Object(v.d)(k({type:"error",text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}));case 6:r.next=10;break;case 8:return r.next=10,Object(v.d)(k({type:"error",text:t}));case 10:return r.next=12,Object(v.d)(y(!1));case 12:case"end":return r.stop()}}),w)}var I=x.a.mark(K),R=x.a.mark(q),B=x.a.mark(M),L=x.a.mark(U),A=function(e){return function(){return _.post("/api/login",e)}},C=function(e){return function(){return _.post("/api/registration",e)}},G=function(){return _.get("/api/v2/user")},D="auth_key";function K(e){var t,n,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.loginObj,n=e.history,a.next=3,Object(v.d)(y(!0));case 3:return a.prev=3,a.next=6,Object(v.b)(A(t));case 6:return r=a.sent,localStorage.setItem(D,r.data.token),_.defaults.headers.Authorization=r.data.token,a.next=11,Object(v.d)(f(r.data));case 11:return n.push("/books"),a.next=14,Object(v.d)(y(!1));case 14:a.next=21;break;case 16:return a.prev=16,a.t0=a.catch(3),console.log(a.t0),a.next=21,N(a.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0438\u043c\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445");case 21:case"end":return a.stop()}}),I,null,[[3,16]])}function q(e){var t,n;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.newUser,n=e.history,r.next=3,Object(v.d)(y(!0));case 3:return r.prev=3,r.next=6,Object(v.b)(C(t));case 6:return n.push("/authorization"),r.next=9,Object(v.d)(k({type:"success",text:"\u0442\u044b \u0437\u0430\u0440\u0435\u0433\u0430\u043b\u0441\u044f, \u0437\u0430\u0435\u0431\u0438\u0441\u044c, \u0442\u0435\u043f\u0435\u0440\u044c \u0442\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u0441 \u044d\u0442\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0437\u0430\u0439\u0442\u0438"}));case 9:return r.next=11,Object(v.d)(y(!1));case 11:r.next=18;break;case 13:return r.prev=13,r.t0=r.catch(3),console.log(r.t0),r.next=18,N(r.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0438\u043c\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445");case 18:case"end":return r.stop()}}),R,null,[[3,13]])}function M(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(v.b)(G);case 3:return e=t.sent,t.next=6,Object(v.d)(f(e.data));case 6:return t.next=8,Object(v.d)(E(!1));case 8:t.next=17;break;case 10:return t.prev=10,t.t0=t.catch(0),console.log(t.t0.response),t.next=15,N(t.t0,"\u0422\u043e\u043a\u0435\u043d \u0443\u0441\u0442\u0430\u0440\u0435\u043b");case 15:return t.next=17,Object(v.d)(E(!1));case 17:case"end":return t.stop()}}),B,null,[[0,10]])}function U(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.e)(r.GET_USER_BY_TOKEN,M);case 2:return e.next=4,Object(v.e)(r.REGISTRATION,q);case 4:return e.next=6,Object(v.e)(r.LOGIN,K);case 6:case"end":return e.stop()}}),L)}var V=n(258);function Y(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(V.a,{animation:"border",variant:"primary"}),Object(j.jsx)(V.a,{animation:"border",variant:"secondary"}),Object(j.jsx)(V.a,{animation:"border",variant:"success"}),Object(j.jsx)(V.a,{animation:"border",variant:"danger"}),Object(j.jsx)(V.a,{animation:"border",variant:"warning"}),Object(j.jsx)(V.a,{animation:"border",variant:"info"}),Object(j.jsx)(V.a,{animation:"border",variant:"light"}),Object(j.jsx)(V.a,{animation:"border",variant:"dark"}),Object(j.jsx)(V.a,{animation:"grow",variant:"primary"}),Object(j.jsx)(V.a,{animation:"grow",variant:"secondary"}),Object(j.jsx)(V.a,{animation:"grow",variant:"success"}),Object(j.jsx)(V.a,{animation:"grow",variant:"danger"}),Object(j.jsx)(V.a,{animation:"grow",variant:"warning"}),Object(j.jsx)(V.a,{animation:"grow",variant:"info"}),Object(j.jsx)(V.a,{animation:"grow",variant:"light"}),Object(j.jsx)(V.a,{animation:"grow",variant:"dark"})]})}var F=Object(a.createContext)(void 0),z=function(){return Object(a.useContext)(F)},H=function(e){var t=e.children,n=Object(a.useRef)(l());n.current=l();var c=b((function(e){return e.auth})),o=c.user,i=c.token,u=b((function(e){return e.common.firstAppLoading})),s={currentToken:i,user:o,login:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){n.current(function(e,t){return{type:r.LOGIN,loginObj:e,history:t}}(e,t))})),logOut:function(){n.current(m())},registration:function(e,t){n.current(function(e,t){return{type:r.REGISTRATION,newUser:e,history:t}}(e,t))}};return Object(a.useEffect)((function(){var e=localStorage.getItem(D);e?(_.defaults.headers.Authorization=e,n.current({type:r.GET_USER_BY_TOKEN})):n.current(E(!1))}),[]),s&&!u?Object(j.jsx)(F.Provider,{value:s,children:t}):Object(j.jsx)(Y,{})},P=n(16),X=n(123),Z=n(262),J=function(e){var t=e.formikInitialValue,n=e.fields,r=e.buttonName,a=e.onSubmit,c=e.schema,o=Object(X.a)({initialValues:t,validationSchema:c,onSubmit:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a(e)}))});return Object(j.jsx)("div",{className:"auth-form justify-content-center d-flex",children:Object(j.jsxs)(Z.a,{noValidate:!0,validated:o.isValid,onSubmit:o.handleSubmit,children:[n.map((function(e){return Object(j.jsx)(Z.a.Row,{children:Object(j.jsxs)(Z.a.Group,{children:[Object(j.jsx)(Z.a.Label,{children:e.title}),Object(j.jsx)(Z.a.Control,{required:!0,id:e.valueName,name:e.valueName,type:e.type,onBlur:o.handleBlur,placeholder:e.placeholder,value:o.values[e.valueName],onChange:o.handleChange,isValid:o.touched[e.valueName]&&!o.errors[e.valueName],isInvalid:o.touched[e.valueName]&&!!o.errors[e.valueName]})]})},e.controlId)})),Object(j.jsx)(s.a,{type:"submit",children:r})]})})},Q=function(e){var t=l(),n=z(),r=P.b({email:P.c().email("Invalid email address").required("Required"),password:P.c().required("Required")});return Object(j.jsxs)("div",{className:"auth-form justify-content-center d-flex",children:[Object(j.jsx)(J,{formikInitialValue:{email:"",password:""},fields:[{type:"text",valueName:"email",title:"E-mail",placeholder:"",controlId:"3"},{type:"password",valueName:"password",title:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"",controlId:"4"}],buttonName:"\u0412\u043e\u0439\u0442\u0438",onSubmit:function(r){n?n.login(r,e.history):t(k({type:"error",text:"\u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0438 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b"}))},schema:r}),Object(j.jsx)(p.a,{onClick:function(){e.history.push("/registration")},className:"cursor-pointer",variant:"primary",children:"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})},W=n(23),$=function(){return{type:r.GET_BOOKS}},ee=function(e){return{type:r.SET_BOOKS,data:e}},te=function(e){return{type:r.SET_BOOK,data:e}},ne=n(265),re=n(259),ae=n(260),ce=n(67),oe=n.n(ce),ie=n(261),ue=function(e){var t=e.children,n=e.show,r=e.onHide,a=e.submitButton,c=e.submitButtonText,o=e.onSubmit,i=e.text,u=e.showFooter,d=void 0===u||u;return Object(j.jsxs)(ie.a,{show:n,onHide:r,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(ie.a.Header,{closeButton:!0,children:Object(j.jsx)(ie.a.Title,{id:"contained-modal-title-vcenter",children:i})}),Object(j.jsx)(ie.a.Body,{children:t}),d?Object(j.jsxs)(ie.a.Footer,{children:[a?Object(j.jsx)(s.a,{onClick:o,children:c}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)(s.a,{onClick:r,children:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c"})]}):Object(j.jsx)(j.Fragment,{})]})},se=function(e){var t=e.show,n=e.onHide,a=(e.history,l()),c=P.b({title:P.c().required("Required"),author:P.c().required("Required"),year:P.a().required("Required")});return Object(j.jsx)(ue,{show:t,onHide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return n()})),onSubmit:function(){},submitButton:!1,submitButtonText:"",text:"\u0414\u043e\u0431\u0430\u0432\u044c \u043a\u043d\u0438\u0433\u0443",showFooter:!1,children:Object(j.jsx)(J,{formikInitialValue:{title:"",author:"",year:""},fields:[{type:"text",valueName:"title",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"",controlId:"1"},{type:"text",valueName:"author",title:"\u0410\u0432\u0442\u043e\u0440",placeholder:"",controlId:"2"},{type:"date",valueName:"year",title:"\u0413\u043e\u0434",placeholder:"",controlId:"3"}],buttonName:"\u043d\u043e\u0432\u0430\u044f \u043a\u043d\u0438\u0433\u0430",onSubmit:function(e){var t;a((t=e,{type:r.ADD_BOOK,book:t})),n()},schema:c})})},de=function(e){var t=Object(a.useState)([]),n=Object(W.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),i=Object(W.a)(o,2),u=i[0],d=i[1],O=b((function(e){return e.books.books})),p=l(),f=Object(a.useRef)((function(){}));f.current=function(){p($())},Object(a.useEffect)((function(){f.current()}),[]),Object(a.useEffect)((function(){O.length>0&&m.current(5)()}),[O]);var m=Object(a.useRef)((function(e){return function(){console.log(e)}}));return m.current=function(e){return function(){for(var t=[],n=e-5;n<e;n++)O[n]&&t.push(O[n]);c(t)}},Object(j.jsxs)("div",{children:[r.map((function(t){return Object(j.jsx)(ne.a,{onClick:function(){return e.history.push("/books/".concat(t.id))},className:"book-card cursor-pointer my-2",children:Object(j.jsxs)(ne.a.Body,{children:[Object(j.jsx)(ne.a.Title,{children:t.title}),Object(j.jsx)(ne.a.Subtitle,{className:"mb-2 text-muted",children:t.author}),Object(j.jsx)(ne.a.Text,{children:Object(j.jsx)(oe.a,{format:"DD.MM.YYYY",children:t.year})})]})},t.id)})),Object(j.jsx)(re.a,{children:Object(j.jsx)(ae.a,{children:function(){for(var e=[],t=Math.ceil(O.length/5),n=1;n<=t;n++)e.push(Object(j.jsx)(s.a,{onClick:m.current(5*n),children:n},"".concat(new Date,"_").concat(n)));return e}()})}),Object(j.jsx)(s.a,{onClick:function(){return d(!0)},className:"mt-5",variant:"success",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"}),Object(j.jsx)(se,{show:u,onHide:function(){return d(!1)},history:e.history})]})};function le(e){var t=e.children,n=e.path,r=z();return r&&r.currentToken?Object(j.jsx)(u.b,{path:n,children:t}):Object(j.jsx)(u.a,{to:"/authorization"})}var be=function(e){var t=z(),n=l(),r=P.b({first_name:P.c().required("Required"),last_name:P.c().required("Required"),email:P.c().email("Invalid email address").required("Required"),password:P.c().required("Required")});return Object(j.jsx)("div",{className:"auth-form justify-content-center d-flex",children:Object(j.jsx)(J,{formikInitialValue:{first_name:"",last_name:"",email:"",password:""},fields:[{type:"text",valueName:"first_name",title:"\u0418\u043c\u044f",placeholder:"",controlId:"1"},{type:"text",valueName:"last_name",title:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",placeholder:"",controlId:"2"},{type:"text",valueName:"email",title:"E-mail",placeholder:"",controlId:"3"},{type:"password",valueName:"password",title:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"",controlId:"4"}],buttonName:"\u0437\u0430\u0440\u0435\u0433\u0430\u0442\u044c\u0441\u044f",onSubmit:function(r){t?t.registration(r,e.history):n(k({type:"error",text:"\u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0438 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b"}))},schema:r})})},je=function(e){var t=e.id,n=e.onHide,a=e.show,c=e.history,o=l();function i(){o(function(e,t){return{type:r.DELETE_BOOK,id:e,history:t}}(t,c))}return Object(j.jsx)(ue,{show:a,submitButton:!0,onSubmit:function(){return i()},submitButtonText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onHide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return n()})),text:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",children:Object(j.jsx)("div",{children:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e"})})},Oe=n(82),pe=n.n(Oe),fe=function(e){var t=e.show,n=e.onHide,a=e.book,c=l(),o={title:a.title,author:a.author,year:pe()(a.year).format("YYYY-MM-DD")},i=P.b({title:P.c().required("Required"),author:P.c().required("Required"),year:P.a().required("Required")});return Object(j.jsx)(ue,{show:t,onHide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return n()})),onSubmit:function(){},submitButton:!1,submitButtonText:"",text:"\u0418\u0437\u043c\u0435\u043d\u0438 \u043a\u043d\u0438\u0433\u0443",showFooter:!1,children:Object(j.jsx)(J,{formikInitialValue:o,fields:[{type:"text",valueName:"title",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"",controlId:"1"},{type:"text",valueName:"author",title:"\u0410\u0432\u0442\u043e\u0440",placeholder:"",controlId:"2"},{type:"date",valueName:"year",title:"\u0413\u043e\u0434",placeholder:"",controlId:"3"}],buttonName:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c",onSubmit:function(e){var t,o;c((t=e,o="".concat(a.id),{type:r.EDIT_BOOK,bookForm:t,id:o})),n()},schema:i})})},me=function(e){var t=["https://tlgrm.eu/_/stickers/b12/d5f/b12d5fb5-fbd0-3a2d-99fc-2642b586f219/2.jpg","https://static.wikia.nocookie.net/36689b26-ddcb-4ae6-a8c0-33b165fb6bcd","https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/1209ea8d93d/b040e8b2b7aeb701e436e/1472075717_1397934971_image.jpg","https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/707e18cc5da/8719cc8272f4a5b57aa64/1472097606_image.jpg","https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/9c601aca149/f9efb55a108f9c805cf97/1417725120_image.jpg","https://i.ytimg.com/vi/hCpnNCqjULw/maxresdefault.jpg","https://coub-anubis-a.akamaized.net/coub_storage/coub/simple/cw_timeline_pic/90dc2512709/05953e2add74dbac18317/1415193181_image.jpg","http://i.mycdn.me/i?r=AEHujHvw2RjEbemUCNEorZbxYpb_p_9AcN2FmGik64KrkRZtvDpGZlB7IRDnkDh2-EF7Zi9s0CiBOSDmbngC-I-k&fn=external_8","https://user92966.clients-cdnnow.ru/upload/setka-editor/a1c/a1cd53320de0951efc82d79db29afc44.jpg.webp","https://user92966.clients-cdnnow.ru/upload/setka-editor/0fe/0fe5f8ef5cc10ec303873a01d39ec01d.jpg.webp","https://sun9-69.userapi.com/impg/ae9mYIT5fRNtgCKP9m5d8wz6ZgqVkDt5JV1u2A/2jRtGN37Ht8.jpg?size=1920x1080&quality=96&sign=211aaf2a866dde1148f548273cbbe14b&type=album","https://sun9-53.userapi.com/impg/6d_zXlOn97SGWJdbrh9zb5ktYlyOUPQIVbmGTA/OM3iO6poYyQ.jpg?size=1925x863&quality=96&sign=28d45dd729e6e8ab6de0977379f2c039&type=album","https://sun9-19.userapi.com/impg/jmdNejMU9wxKV13PfjAhXjWIS5mLs6cXJ1YRlA/K-XxkGAuzbo.jpg?size=1920x1080&quality=96&sign=fd224e2ad334871c1ad6afb999fb9ab6&type=album","https://sun9-20.userapi.com/impg/SmBVN_ZAYSjpU6xM5VV1gYFRN-dFzBOk0jUTiQ/IH80pVkkFgc.jpg?size=1920x1080&quality=96&sign=4ec042afb016c1e7e493eda5a1c303f3&type=album"],n=Object(a.useState)(!1),c=Object(W.a)(n,2),o=c[0],i=c[1],u=Object(a.useState)(!1),d=Object(W.a)(u,2),O=d[0],p=d[1],f=Object(a.useState)(0),m=Object(W.a)(f,2),h=m[0],x=m[1],v=b((function(e){return e.books.currentBook})),g=e.match.params.id,_=Object(a.useRef)((function(){return x(Math.round(Math.random()*t.length-1))})),E=l();return Object(a.useEffect)((function(){_.current(),E(function(e){return{type:r.GET_BOOK,id:e}}(g))}),[E,g]),v?Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"d-flex mt-5 justify-content-end",children:Object(j.jsx)(s.a,{onClick:function(){return i(!0)},variant:"danger",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"})}),Object(j.jsx)(je,{id:g,onHide:function(){return i(!1)},show:o,history:e.history}),Object(j.jsxs)(ne.a,{className:"book-card my-2",children:[Object(j.jsx)(ne.a.Img,{src:t[h]}),Object(j.jsxs)(ne.a.Body,{children:[Object(j.jsx)(ne.a.Title,{children:v.title}),Object(j.jsx)(ne.a.Subtitle,{className:"mb-2 text-muted",children:v.author}),Object(j.jsx)(ne.a.Text,{children:Object(j.jsx)(oe.a,{format:"DD.MM.YYYY",children:v.year})}),Object(j.jsx)(s.a,{onClick:function(){return p(!0)},variant:"primary",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"}),Object(j.jsx)(fe,{show:O,onHide:function(){return p(!1)},book:v})]})]})]}):Object(j.jsx)("div",{children:"\u044a\u0430\u044a\u0430"})};function he(){var e=[{routeName:"/registration",routeComponent:Object(u.g)(be),private:!1},{routeName:"/authorization",routeComponent:Object(u.g)(Q),private:!1},{routeName:"/about",routeComponent:Object(u.g)(O),private:!0},{routeName:"/books/:id",routeComponent:Object(u.g)(me),private:!0},{routeName:"/books",routeComponent:Object(u.g)(de),private:!0},{routeName:"/",routeComponent:Object(j.jsx)(u.a,{to:"/books"}),private:!0}];return Object(j.jsx)(u.d,{children:e.map((function(e){return e.private?Object(j.jsx)(le,{path:e.routeName,children:e.routeComponent},e.routeName):Object(j.jsx)(u.b,{path:e.routeName,children:e.routeComponent},e.routeName)}))})}var xe=n(264);function ve(){var e=l(),t=b((function(e){return e.common.alerts}));return Object(j.jsx)("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"absolute",minHeight:"200px",top:0,right:0},children:t.map((function(t){return Object(j.jsxs)(xe.a,{style:{backgroundColor:"success"===t.type?"green":"red",color:"white",minWidth:200},onClose:(n=t.id,function(){e(S(n))}),children:[Object(j.jsxs)(xe.a.Header,{children:[Object(j.jsx)("strong",{className:"mr-auto",children:"success"===t.type?"\u0417\u0430\u0435\u0431\u0438\u0441\u044c":"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(j.jsx)("small",{children:"just now"})]}),Object(j.jsx)(xe.a.Body,{children:t.text})]},t.id);var n}))})}var ge=function(){var e=b((function(e){return e.common.appLoading})),t=l(),n=z();return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("div",{style:e?{}:{display:"none"},children:Object(j.jsx)(Y,{})}),Object(j.jsxs)("div",{className:"app_container",style:e?{display:"none"}:{},children:[Object(j.jsx)(he,{}),Object(j.jsx)(ve,{})]}),n&&n.user&&Object(j.jsx)(s.a,{variant:"danger",size:"lg",className:"logout-button",onClick:function(){t(m())},children:"\u043b\u043e\u0433\u0430\u0443\u0442"})]})},_e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,266)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},Ee=(n(254),n(61)),ye=n(28),ke=n(14),Te={token:"",user:void 0};function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.LOGIN_SUCCESS:return Object(ke.a)(Object(ke.a)({},e),{},{user:t.data.user,token:t.data.token});case r.SET_TOKEN:return Object(ke.a)(Object(ke.a)({},e),{},{token:t.token});case r.LOGOUT:return Object(ke.a)(Object(ke.a)({},e),{},{token:"",user:void 0});default:return e}}var we={books:[],currentBook:null};function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_BOOKS:return Object(ke.a)(Object(ke.a)({},e),{},{books:t.data});case r.SET_BOOK:return Object(ke.a)(Object(ke.a)({},e),{},{currentBook:t.data});default:return e}}var Ie=n(21),Re={alerts:[],appLoading:!1,firstAppLoading:!0};function Be(e,t){for(var n=[],r=0;r<e.alerts.length;r++)e.alerts[r].id!==t&&n.push(e.alerts[r]);return n}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.FIRST_APP_LOADING:return Object(ke.a)(Object(ke.a)({},e),{},{firstAppLoading:t.flag});case r.SET_LOADING:return Object(ke.a)(Object(ke.a)({},e),{},{appLoading:t.flag});case r.SET_ALERT:return Object(ke.a)(Object(ke.a)({},e),{},{alerts:[t.newAlert].concat(Object(Ie.a)(e.alerts))});case r.REMOVE_ALERT:return Object(ke.a)(Object(ke.a)({},e),{},{alerts:Be(e,t.alertId)});default:return e}}var Ae={common:Re,auth:Te,books:we};var Ce=n(124),Ge=x.a.mark(Pe),De=x.a.mark(Xe),Ke=x.a.mark(Ze),qe=x.a.mark(Je),Me=x.a.mark(Qe),Ue=x.a.mark(We),Ve=function(){return _.get("/api/v2/books")},Ye=function(e){return function(){return _.get("/api/v2/books/".concat(e))}},Fe=function(e){return function(){return _.post("/api/v2/books",e)}},ze=function(e,t){return function(){return _.put("/api/v2/books/".concat(t),e)}},He=function(e){return function(){return _.delete("/api/v2/books/".concat(e))}};function Pe(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.d)(y(!0));case 2:return t.prev=2,t.next=5,Object(v.b)(Ve);case 5:return e=t.sent,t.next=8,Object(v.d)(ee(e.data));case 8:return t.next=10,Object(v.d)(y(!1));case 10:t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(2),console.log(t.t0),t.next=17,N(t.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 17:case"end":return t.stop()}}),Ge,null,[[2,12]])}function Xe(e){var t,n;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.book,r.next=3,Object(v.d)(y(!0));case 3:return r.prev=3,r.next=6,Object(v.b)(Fe(t));case 6:return n=r.sent,r.next=9,Object(v.d)(ee(n.data));case 9:return r.next=11,Object(v.d)(y(!1));case 11:return r.next=13,Object(v.d)(k({type:"success",text:"\u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u043e \u0438\u0449\u0438 \u0441\u0432\u043e\u044e \u043a\u043d\u0438\u0433\u0443 \u0432 \u043a\u043e\u043d\u0446\u0435 \u0445\u044b\u044b\u044b\u044b"}));case 13:r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(3),r.next=19,N(r.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445");case 19:case"end":return r.stop()}}),De,null,[[3,15]])}function Ze(e){var t,n;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,r.next=3,Object(v.d)(y(!0));case 3:return r.prev=3,r.next=6,Object(v.b)(Ye(t));case 6:return n=r.sent,r.next=9,Object(v.d)(te(n.data));case 9:return r.next=11,Object(v.d)(y(!1));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(3),r.next=17,N(r.t0,"\u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u043a\u043d\u0438\u0433\u0438");case 17:case"end":return r.stop()}}),Ke,null,[[3,13]])}function Je(e){var t,n,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.bookForm,n=e.id,a.next=3,Object(v.d)(y(!0));case 3:return a.prev=3,a.next=6,Object(v.b)(ze(t,n));case 6:return r=a.sent,a.next=9,Object(v.d)(te(r.data));case 9:return a.next=11,Object(v.d)(y(!1));case 11:return a.next=13,Object(v.d)(k({type:"success",text:"\u0432\u0441\u0435 \u043a\u0440\u0443\u0442\u043e"}));case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(3),a.next=19,N(a.t0,"\u0448\u0442\u043e\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445");case 19:case"end":return a.stop()}}),qe,null,[[3,15]])}function Qe(e){var t,n;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,n=e.history,r.next=3,Object(v.d)(y(!0));case 3:return r.prev=3,r.next=6,Object(v.b)(He(t));case 6:return r.next=8,Object(v.d)(k({type:"success",text:"\u0412\u0441\u0435 \u043a\u0440\u0443\u0442\u043e \u043a\u043d\u0438\u0433\u0430 \u0443\u0434\u0430\u043b\u043b\u0438\u0430\u0441\u044f"}));case 8:return r.next=10,Object(v.d)(y(!1));case 10:return r.next=12,Object(v.d)($());case 12:n.push("/books"),r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(3),r.next=19,N(r.t0,"\u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u043a\u043d\u0438\u0433\u0438");case 19:case"end":return r.stop()}}),Me,null,[[3,15]])}function We(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.e)(r.EDIT_BOOK,Je);case 2:return e.next=4,Object(v.e)(r.DELETE_BOOK,Qe);case 4:return e.next=6,Object(v.e)(r.ADD_BOOK,Xe);case 6:return e.next=8,Object(v.e)(r.GET_BOOKS,Pe);case 8:return e.next=10,Object(v.e)(r.GET_BOOK,Ze);case 10:case"end":return e.stop()}}),Ue)}var $e=x.a.mark(tt),et=x.a.mark(nt);function tt(e){var t,n;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.alertId,n=e.timeout,!t||!n){r.next=6;break}return r.next=4,Object(v.c)(n);case 4:return r.next=6,Object(v.d)(S(t));case 6:case"end":return r.stop()}}),$e)}function nt(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.e)(r.REMOVE_ALERT_TIMEOUT,tt);case 2:case"end":return e.stop()}}),et)}var rt=x.a.mark(at);function at(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)([U(),We(),nt()]);case 2:case"end":return e.stop()}}),rt)}var ct=function(e){var t=Object(Ce.a)(),n=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ye.d)(Object(ye.a)(t)),r=Object(ye.e)(Object(ye.c)({common:Le,auth:Se,books:Ne}),e,n);return t.run(at),r}(Ae);i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(d.a,{store:ct,children:Object(j.jsx)(H,{children:Object(j.jsx)(Ee.a,{children:Object(j.jsx)(ge,{})})})})}),document.getElementById("root")),_e()}},[[255,1,2]]]);
//# sourceMappingURL=main.fc94a4d4.chunk.js.map